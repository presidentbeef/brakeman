
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman - Rails Security Scanner: Brakeman 2.0.0 Released</title>
  <meta name="author" content="Justin Collins">
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="http://brakemanscanner.org/blog/2013/05/20/brakeman-2-dot-0-0-released/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Brakeman - Rails Security Scanner" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12578396-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman - Rails Security Scanner</a></h1>
  
    <h2>Static analysis security scanner for Ruby on Rails</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    <div class="articlelogo">&nbsp;</div>
    
      <h1 class="entry-title">Brakeman 2.0.0 Released</h1>
    
    
      <p class="meta">




<time datetime="2013-05-20 10:09:00 -0700" pubdate  updated >May 20<span>th</span>, 2013</time>


</p>
    
  </header>


<div class="entry-content"><p>Brakeman 2.0 is here! While it does include a lot of updates, the &#8220;2.0&#8221; is mostly to indicate this release includes some changes which may break external tools (also, who wants a version &#8220;1.10&#8221;?). Tool maintainers are encouraged to avoid dependencies on warning messages and types (use the &#8220;warning code&#8221; instead), and to use warning fingerprints + line numbers for comparing warnings.</p>

<p>Lots more features are on the horizon for the 2.x family!</p>

<p><em>Changes since 1.9.5</em>:</p>

<ul>
<li>Remove &#8220;timestamp&#8221; key from JSON reports</li>
<li>Relative paths are used by default in JSON reports</li>
<li><code>--absolute-paths</code> replaces <code>--relative-paths</code></li>
<li>Fix fingerprint generation to actually use the file path</li>
<li>Clean up SQL CVE warning messages</li>
<li>Remove deprecated config file locations</li>
<li>Add <code>--only-files</code> option to specify files/paths to scan (<a href="https://github.com/ehlertij">Ian Ehlert</a>)</li>
<li>Add Marshal/CSV deserialization check</li>
<li>Combine Marshal/YAML/CSV deserialization checks into single check</li>
<li>Avoid duplicate &#8220;Dangerous Send&#8221; and &#8220;Unsafe Reflection&#8221; warnings</li>
<li>Avoid duplicate results for Symbol DoS check</li>
<li>Medium confidence for mass assignment to <code>attr_protected</code> models</li>
<li>Only treat classes with names containing <code>Controller</code> like controllers</li>
<li>Better handling of classes nested inside controllers</li>
<li>Better handling of controller classes nested in classes/modules</li>
<li>Handle <code>-&gt;</code> lambdas with no arguments (<a href="https://github.com/presidentbeef/brakeman/issues/331">#331</a>)</li>
<li>Handle explicit block argument destructuring</li>
<li>Skip Rails config options that are real objects (<a href="https://github.com/presidentbeef/brakeman/issues/324">#324</a>)</li>
<li>Detect Rails 3 JSON escape config option</li>
<li>Much better tracking of warning file names</li>
<li>Fix errors when using <code>--separate-models</code> (<a href="https://github.com/noahd1">Noah Davis</a>)</li>
<li>Fix text report console output in JRuby (<a href="https://github.com/presidentbeef/brakeman/issues/229">#229</a>)</li>
<li>Fix false positives on <code>Model#id</code></li>
<li>Fix false positives on <code>params.to_json</code></li>
<li>Fix model path guesses to use &#8220;models/&#8221; instead of &#8220;controllers/&#8221;</li>
<li>Use exceptions instead of abort in brakeman lib (<a href="https://github.com/presidentbeef/brakeman/issues/230">#230</a>)</li>
<li>Update to Ruby2Ruby 2.0.5</li>
</ul>


<h3>JSON Report Changes</h3>

<p>Several changes were made to JSON reports in this release. The <code>["scan_info"]["timestamp"]</code> key was removed, since it was just a duplicate of <code>["scan_info"]["end_time"]</code>.</p>

<p>JSON reports now default to reporting relative paths for file names in warnings, which seems to be more useful for external tools. Because of this change, the <code>--relative-paths</code> option has been removed and replaced with <code>--absolute-paths</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/333">timestamp change</a>, <a href="https://github.com/presidentbeef/brakeman/pull/330">relative paths change</a>)</p>

<h3>Fingerprint Generation</h3>

<p>The previous release had a bug where fingerprints were not really including the file name as part of the fingerprint. This has been resolved, and fingerprints should be a reliable way of tracking warnings now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/317">changes</a>)</p>

<h3>Warning Messages</h3>

<p>The warning messages for SQL CVEs were unnecessarily verbose, so they have been trimmed down. Of course, this shouldn&#8217;t affect anyone, because all apps have upgraded to Rails versions without reported vulnerabilities, right?</p>

<p>Some small changes have been made to other warning messages. Please do not rely on warning messages remaining constant. To track warnings, use the <code>warning_code</code> attribute which will never change.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/334">changes</a>)</p>

<h3>Config File Default Locations</h3>

<p>The following locations will no longer be automatically searched for Brakeman configuration files:</p>

<pre><code>* `./config.yaml`
* `.brakeman/config.yaml`
* `/etc/brakeman/config.yaml`
* The Brakeman `lib/` directory
</code></pre>

<p>The following locations are still used:</p>

<pre><code>* `./config/brakeman.yml`
* `~/.brakeman/config.yml`
* `/etc/brakeman/config.yml`
</code></pre>

<p>Yes, Brakeman can use configuration files. See <code>brakeman --help</code> for details.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/310">changes</a>)</p>

<h3>Limiting Scans</h3>

<p>While individual files can be exempted from a scan using <code>--skip-files</code>, the new <code>--only-files</code> option can limit scans to a set of files and directories, thanks to <a href="https://github.com/ehlertij">Ian Ehlert</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/316">changes</a>)</p>

<h3>Deserialization Checks</h3>

<p>Brakeman now checks for deserialization of user input using <code>Marshal</code>, <code>YAML</code>, and <code>CSV</code>. The former <code>YAMLLoad</code> check has been merged into the new <code>CheckDeserialize</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/329">changes</a>)</p>

<h3>Fewer Duplicate Warnings</h3>

<p>A few new checks (symbol DoS, dangerous sends, and unsafe reflection) were generating a lot of duplicate warnings. This has been fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/338">changes</a>)</p>

<h3>Nested Classes and Controllers</h3>

<p>Brakeman&#8217;s previous approach to nested classes was to ignore them. But it appears some people use classes as namespaces and place important classes (like controllers) inside them. This release changes how Brakeman deals with nested classes, as well as classes that inherit from <code>ApplicationController</code> but do not have <code>Controller</code> in their name. Please see the <a href="https://github.com/presidentbeef/brakeman/pull/325">pull request</a> for details.</p>

<p>Hopefully this means more accurate scans, but please report any correct warnings from earlier versions missing in 2.0.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/325">changes</a>)</p>

<h3>&#8220;Stabby&#8221; Lambdas with No Arguments</h3>

<p>Errors like <code>undefined method 'each' for 0:Fixnum</code> caused by use of <code>-&gt;</code> lambdas with zero arguments should be fixed now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/332">changes</a>)</p>

<h3>Explicit Block Argument Destructuring</h3>

<p>Explicit block argument destructuring like this:</p>

<pre><code>blah do |x, (y,z)|
end
</code></pre>

<p>used to be ignored, but now the arguments are handled in order to keep block arguments in their proper scope.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/307/">changes</a>)</p>

<h3>Rails 3 Config Processing</h3>

<p>Brakeman only cares about Rails configuration processing to check for specific settings. It converts a setting like <code>config.a.b.z</code> to a hash entry like <code>[:config][:a][:b][:z]</code>. However, if real values are found for <code>config.a.b</code> this messes things up. So for now they are ignored.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/326">changes</a>)</p>

<h3>Errors from Separating Models</h3>

<p><a href="https://github.com/noahd1">Noah Davis</a> fixed an error where file names were not being properly set when using the <code>--separate-models</code> option.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/313">changes</a>)</p>

<h3>Better File Tracking</h3>

<p>Files associated with warnings should be more accurate now, as file information is better preserved during processing.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/318">changes</a>)</p>

<h3>JRuby Console Output</h3>

<p>The default text output to a console should now be working again in JRuby. Thanks to <a href="https://github.com/jeg2">JEG2</a> for pushing out a new version of <a href="http://highline.rubyforge.org/">HighLine</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/339">changes</a>)</p>

<h3>Model#id and to_json False Positives</h3>

<p>There should be fewer warnings generated by <code>Model#id</code> and <code>to_json</code> calls on <code>params</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/309">changes</a>)</p>

<h3>Exceptions instead of Abort</h3>

<p>A few instances of <code>abort</code> have been removed from Brakeman and replaced with exceptions. This should make it easier to use Brakeman as a library.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/335">changes</a>)</p>

<h3>Report Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Collins</span></span>

      




<time datetime="2013-05-20 10:09:00 -0700" pubdate  updated >May 20<span>th</span>, 2013</time>



      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://brakemanscanner.org/blog/2013/05/20/brakeman-2-dot-0-0-released/" data-via="brakeman" data-counturl="http://brakemanscanner.org/blog/2013/05/20/brakeman-2-dot-0-0-released/" >Tweet</a>
  
  
  <g:plusone size="medium"></g:plusone>
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'brakeman';
  var disqus_identifier = 'http://brakemanscanner.org/blog/2013/05/20/brakeman-2-dot-0-0-released/';
  var disqus_url = 'http://brakemanscanner.org/blog/2013/05/20/brakeman-2-dot-0-0-released/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside role=sidebar>
  
    <section>
  <p></p>
  <p>Brakeman is an open source vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
</section>
<section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="http://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/12/brakeman-2-dot-3-1-released/">Brakeman 2.3.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/11/brakeman-2-dot-3-0-released/">Brakeman 2.3.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/28/brakeman-2-dot-2-0-released/">Brakeman 2.2.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/18/brakeman-2-dot-1-2-released-important-security-update/">Brakeman 2.1.2 Released - Important Security Update</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/21/brakeman-2-dot-1-1-released/">Brakeman 2.1.1 Released</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <a class="twitter-timeline" data-dnt=true href="https://twitter.com/brakeman" data-widget-id="258654953097273345">Tweets by @brakeman</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
