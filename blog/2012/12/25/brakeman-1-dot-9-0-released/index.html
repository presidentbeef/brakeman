
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman - Rails Security Scanner: Brakeman 1.9.0 Released</title>
  <meta name="author" content="Justin Collins">
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails application."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="http://brakemanscanner.org/blog/2012/12/25/brakeman-1-dot-9-0-released/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Brakeman - Rails Security Scanner" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12578396-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman - Rails Security Scanner</a></h1>
  
    <h2>Static analysis security scanner for Ruby on Rails</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    <div class="articlelogo">&nbsp;</div>
    
      <h1 class="entry-title">Brakeman 1.9.0 Released</h1>
    
    
      <p class="meta">




<time datetime="2012-12-25 11:00:00 -0800" pubdate  updated >Dec 25<span>th</span>, 2012</time>


</p>
    
  </header>


<div class="entry-content"><p>Happy <a href="https://en.wikipedia.org/wiki/Eggnog_Riot">Eggnog Riot</a> day!</p>

<p>This is a major release: 95 changed files with 1,775 additions and 14,484 deletions. This provides ample room for new bugs, so please report any issues.</p>

<p><em>Changes since 1.8.3</em>:</p>

<ul>
<li>Update to RubyParser 3</li>
<li>Ignore route information by default</li>
<li>Add optional &#8220;interprocedural&#8221; analysis for controllers</li>
<li>Properly pass instance variables between before_filters</li>
<li>Support <code>strong_parameters</code> (<a href="https://github.com/presidentbeef/brakeman/issues/88">#88</a>)</li>
<li>Support newer <code>validates :format</code> call (<a href="https://github.com/presidentbeef/brakeman/issues/198">#198</a>)</li>
<li>Add scan time to reports (<a href="https://github.com/presidentbeef/brakeman/issues/158">#158</a>)</li>
<li>Add Brakeman version to reports</li>
<li>Don&#8217;t mangle whitespace in JSON code formatting</li>
<li>Fix <code>CheckExecute</code> to warn on all string interpolation (<a href="https://github.com/presidentbeef/brakeman/issues/213">#213</a>)</li>
<li>Fix false positive on <code>to_sql</code> calls</li>
<li>Add AppTree as facade for filesystem (<a href="https://github.com/brynary">Bryan Helmkamp</a>)</li>
<li>Add link for translate vulnerability warning (<a href="https://github.com/grosser">Michael Grosser</a>)</li>
<li>Add Rakefile to run tests (<a href="https://github.com/grosser">Michael Grosser</a>)</li>
<li>Better default config file locations (<a href="https://github.com/grosser">Michael Grosser</a>)</li>
<li>Remove &#8220;find by regex&#8221; feature from <code>CallIndex</code></li>
<li>Reduce Sexp creation</li>
<li>Handle empty model files</li>
</ul>


<h3>Update to RubyParser 3</h3>

<p>With the update to use RubyParser 3.x, Brakeman no longer includes a vendored version of RubyParser (which was only used with running with Ruby 1.9), which reduced code size by about 14,000 lines.</p>

<p>RubyParser 3 supports Ruby 1.9 much more fully, so there should be very few parse errors. Additionally, Brakeman no longer chooses parsers based on the current Ruby version.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/190">changes</a>)</p>

<h3>Route Information Ignored by Default</h3>

<p>Route information is only used in Brakeman to determine whether a controller method should perform an implicit render. Since determining Rails routes statically is quite difficult to get right, it is better to assume a method is a routable action. Previous versions provided the <code>-a</code> option for this, which is now on by default. To turn off this behavior (and revert to the old), use <code>--no-assume-routes</code>.</p>

<p>This does not affect default route warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/219">changes</a>)</p>

<h3>Optional Interprocedural Analysis for Controllers</h3>

<p>Currently, Brakeman essentially looks at each method in isolation. Values are propagated from controller actions (including before_filters) through rendered views and templates. But if a controller action calls another method which has an effect on the eventual output of the action, Brakeman does not processed the invoked method.</p>

<p>This release includes optional, experimental support for analyzing controller methods called from within controller actions.</p>

<p>For a simple example, instance variables set in helper methods will now be added to a rendered view. Also, values returned from called methods will be tracked:</p>

<pre><code>def create
  get_user 
  #@user is now User.find(params[:id])

  @account = find_account(@user)  
  #@account is now Account.where(:user =&gt; User.find(params[:id]).id
end

private

def get_user
  @user = User.find(params[:id])
end

def find_account
  Account.where(:user =&gt; @user.id)
end
</code></pre>

<p>This is limited to methods available in the controller (via a parent class or mixins). It is also limited to a &#8220;depth of one&#8221;, meaning it will not try to analyze methods called by helper methods (<code>get_user</code> and <code>find_account</code> above).</p>

<p>Since this feature is still experimental and will definitely increase scan times, it is turned off by default. Use <code>--interprocedural</code> to enable it. (Better name pending suggestions&#8230;)</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/218">changes</a>)</p>

<h3>Pass Instance Variables between Filters</h3>

<p>While instance variables set in <code>before_filters</code> were set properly, <code>before_filter</code> which used instance variables from an earlier filter could not see those variables. This has been fixed, which will likely lead to new or more accurate warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/224">changes</a>)</p>

<h3>Support for <code>strong_parameters</code></h3>

<p>In Rails 4, the responsibility for mass assignment protection will move from models to controllers where mass assignment is actually used. A preview of the new functionality is available in the <a href="https://github.com/rails/strong_parameters">strong_parameters</a> gem. Brakeman should no longer warn on mass assignment for models protected with <code>strong_parameters</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/204">changes</a>)</p>

<h3>Support <code>validates :format</code></h3>

<p>In Rails 3, format validation changed from <code>validates_format_of</code> to the more generic <code>validates</code> method. Brakeman will now check <code>validates</code> calls for proper anchors on regular expressions for <code>:format</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/205">changes</a>)</p>

<h3>Report Changes</h3>

<p>Reports will now contain Brakeman version and scan duration. JSON reports contain <code>start_time</code> and <code>end_time</code> timestamps. For now, JSON reports will still have a <code>timestamp</code> key, but it will be identical to <code>end_time</code>. It will be removed in Brakeman 2.0.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/193">changes</a>)</p>

<p>Additionally, code formatting in JSON reports has changed slightly. Previously, code was formatted with the HTML output in mind, so line breaks were removed. Now JSON reports include the code formatted from Ruby2Ruby without any mangling.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/191">changes</a>)</p>

<h3>Fix Command Injection Check</h3>

<p>The command injection check will now (again) warn on any form on string interpolation used for process execution, whether or not user input is involved.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/216">changes</a>)</p>

<h3>Fix <code>to_sql</code> False Positives</h3>

<p>SQL code generated from Arel&#8217;s <code>to_sql</code> method will be considered safe.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/194">changes</a>)</p>

<h3>File System Facade</h3>

<p>Bryan Helmkamp cleaned up Brakeman&#8217;s file access into a single object. This should simplify future changes and add some consistency to how Brakeman handles files.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/197">changes</a>)</p>

<h3>Run Tests via Rake</h3>

<p>Thanks to Michael Grosser, running <code>rake</code> will now run Brakeman&#8217;s tests.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/183">changes</a>)</p>

<h3>Improved Config File Locations</h3>

<p>Also thanks to Michael Grosser, Brakeman will check more sane locations for Brakeman configuration files. This version adds <code>./config/brakeman.yml</code>, <code>~/.brakeman/config.yml</code>, and <code>/etc/brakeman/config.yml</code> as default locations for configuration files. The old locations are deprecated now, and will be removed in Brakeman 2.0.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/182">changes</a></p>

<h3>More Internal Changes</h3>

<p>Call indexing performance has been given another <a href="http://blog.presidentbeef.com/">slight boost</a> with the removal of the ability to search for call targets via regular expressions (which was not being used anywhere).</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/189">changes</a>)</p>

<p>The number of s-expressions generated by Brakeman has been reduced, although this did not lead to any major performance improvement.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/207">changes</a>)</p>

<p>Data-flow/alias processing was performing two passes. This has been reduced to just one.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/224">changes</a>)</p>

<p>Empty model files will no longer cause errors.</p>

<h3>Report Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Collins</span></span>

      




<time datetime="2012-12-25 11:00:00 -0800" pubdate  updated >Dec 25<span>th</span>, 2012</time>



      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://brakemanscanner.org/blog/2012/12/25/brakeman-1-dot-9-0-released/" data-via="brakeman" data-counturl="http://brakemanscanner.org/blog/2012/12/25/brakeman-1-dot-9-0-released/" >Tweet</a>
  
  
  <g:plusone size="medium"></g:plusone>
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'brakeman';
  var disqus_identifier = 'http://brakemanscanner.org/blog/2012/12/25/brakeman-1-dot-9-0-released/';
  var disqus_url = 'http://brakemanscanner.org/blog/2012/12/25/brakeman-1-dot-9-0-released/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside role=sidebar>
  
    <section>
  <p></p>
  <p>Brakeman is an open source vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
</section>
<section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="http://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/18/brakeman-1-dot-9-1-released/">Brakeman 1.9.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/25/brakeman-1-dot-9-0-released/">Brakeman 1.9.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/13/brakeman-1-dot-8-3-released/">Brakeman 1.8.3 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/17/brakeman-1-dot-8-2-released/">Brakeman 1.8.2 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/24/brakeman-1-dot-8-1-released/">Brakeman 1.8.1 Released</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <a class="twitter-timeline" data-dnt=true href="https://twitter.com/brakeman" data-widget-id="258654953097273345">Tweets by @brakeman</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
