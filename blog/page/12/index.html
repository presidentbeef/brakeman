
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman</title>
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="https://brakemanscanner.org/blog/page/12/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="feed.xml" rel="alternate" title="Brakeman" type="application/atom+xml"/>
  

  

  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@brakeman" />
<meta name="twitter:title" content="Brakeman Security Scanner" />
<meta name="twitter:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
<meta name="twitter:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman</a></h1>
  
    <h2>Ruby on Rails Static Analysis Security Tool</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:https://brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/10/28/brakeman-3-dot-1-2-released">Brakeman 3.1.2 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-10-28 15:59:00 -0700" pubdate  updated >2015-10-28 15:59:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>This release is mostly bug fixes and false positive reduction. However, please note fingerprints for inline render warnings will change.</p>

<p><em>Changes since 3.1.1</em>:</p>

<ul>
  <li>Sortable tables in HTML report (David Lanner)</li>
  <li>Add line numbers to class-level warnings</li>
  <li>Warn on SQL query keys, not values in hashes (<a href="https://github.com/presidentbeef/brakeman/issues/738">#738</a>)</li>
  <li>Set user input value for inline renders</li>
  <li>Avoid warning on inline renders with safe content types</li>
  <li>Treat <code class="highlighter-rouge">current_user</code> like a model (<a href="https://github.com/presidentbeef/brakeman/issues/744">#744</a>)</li>
  <li>Avoid warning about model <code class="highlighter-rouge">find/find_by*</code> in hrefs</li>
  <li>Handle <code class="highlighter-rouge">private def ...</code></li>
  <li>Handle empty interpolation in HAML filters (<a href="https://github.com/presidentbeef/brakeman/issues/732">#732</a>)</li>
  <li>Catch divide-by-zero in alias processing (<a href="https://github.com/presidentbeef/brakeman/issues/729">#729</a>)</li>
  <li>Ignore filters that are not method names</li>
  <li>Search for config file relative to application root</li>
  <li>Use SafeYAML to load configuration files</li>
  <li>Allow inspection of recursive Sexps</li>
  <li>Reduce string allocations in <code class="highlighter-rouge">Warning#initialize</code></li>
</ul>

<h3 id="sortable-tables">Sortable Tables</h3>

<p><a href="https://github.com/dlanner">David Lanner</a> added the ability to sort tables in the HTML report by clicking on the column headers.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/726">changes</a>)</p>

<h3 id="line-numbers-for-class-warnings">Line Numbers for Class Warnings</h3>

<p>When warning about an entire class (like a model missing <code class="highlighter-rouge">attr_accessible</code>), the warning line number will point to the beginning of the class.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/733">changes</a>)</p>

<h3 id="sql-query-hashes">SQL Query Hashes</h3>

<p>A long-standing bug in Brakeman caused it to warn about values in query hashes (e.g., <code class="highlighter-rouge">User.where(:x =&gt; params[:x])</code>) when it was intended to warn about user input in the <em>keys</em>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/740">changes</a>)</p>

<h3 id="inline-renders">Inline Renders</h3>

<p>Brakeman will now report the <code class="highlighter-rouge">render</code> call as the <code class="highlighter-rouge">code</code> value and the user input as <code class="highlighter-rouge">user_input</code>. Please note the code will look a little different from what Brakeman reports, as render calls are turned into a slightly different AST node internally. This will definitely change fingerprints for these warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/751">changes</a>)</p>

<h3 id="current_user">current_user</h3>

<p>In a couple places, Brakeman will treat <code class="highlighter-rouge">current_user</code> like a model instance, which it almost always is. This will probably be expanded in future releases.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/749">changes</a>)</p>

<h3 id="inline-privates">Inline Privates</h3>

<p>Calls to <code class="highlighter-rouge">private</code> using the return value of <code class="highlighter-rouge">def</code> will now work properly:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private def secret_stuff
# ...
end
</code></pre></div></div>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/731">changes</a>)</p>

<h3 id="empty-haml-interpolation">Empty HAML Interpolation</h3>

<p>Empty HAML interpolation inside of filters will no longer cause crashes and will be handled properly.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/750">changes</a>)</p>

<h3 id="divide-by-zero">Divide-by-Zero</h3>

<p>Brakeman sometimes divides by zero when it performs simple arithmetic during constant folding. While this is now reported as an error (and used to be, too), someday it should be a warning instead.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/730">changes</a>)</p>

<h3 id="config-file-changes">Config File Changes</h3>

<p>When looking for the <code class="highlighter-rouge">config/brakeman.yml</code> configuration file, Brakeman will now look relative to the application path instead of the working directory.</p>

<p>Additionally, the <code class="highlighter-rouge">SafeYAML</code> gem is used to prevent code execution for those running Brakeman against untrusted code.</p>

<p>(changes <a href="https://github.com/presidentbeef/brakeman/pull/725">here</a> and <a href="https://github.com/presidentbeef/brakeman/pull/741">here</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c01f07ccc2490d0421e5974499c57f519aa371bfab5d25ba3b224e7ae9e2c415  brakeman-3.1.2.gem
d820c872cbe7bc8452c9bd8bd46d990ff1c0d53ee621c09f1997270fc978f783  brakeman-min-3.1.2.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Thank you to everyone who reported bugs fixed in this release.</p>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter, joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>, or hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a>.</p>

</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/09/23/brakeman-3-dot-1-1-released">Brakeman 3.1.1 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-09-23 08:11:00 -0700" pubdate  updated >2015-09-23 08:11:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>This release includes two new checks and a number of bug fixes.</p>

<p><em>Changes since 3.1.0</em>:</p>

<ul>
  <li>Add check for user input in session keys</li>
  <li>Add optional check for use of MD5 and SHA1</li>
  <li>Fix absolute paths for Windows (<a href="https://github.com/spcoder">Cody Frederick</a>)</li>
  <li>Allow searching call index methods by regex (<a href="https://github.com/aianus">Alex Ianus</a>)</li>
  <li>Consider <code class="highlighter-rouge">j</code>/<code class="highlighter-rouge">escape_javascript</code> safe inside Haml JavaScript blocks (<a href="https://github.com/presidentbeef/brakeman/issues/708">#708</a>)</li>
  <li>Better Haml processing of <code class="highlighter-rouge">find_and_preserve</code> calls</li>
  <li>Fix chained assignment</li>
  <li>Treat <code class="highlighter-rouge">a.try(&amp;:b)</code> like <code class="highlighter-rouge">a.b()</code></li>
  <li>Add more Arel methods to be ignored in SQL (<a href="https://github.com/presidentbeef/brakeman/issues/711">#711</a>)</li>
  <li>Avoid warning when linking to decorated models (<a href="https://github.com/presidentbeef/brakeman/issues/683">#683</a>)</li>
  <li>Support newer terminal-table releases (<a href="https://github.com/presidentbeef/brakeman/issues/709">#709</a>)</li>
</ul>

<h3 id="session-manipulation-check">Session Manipulation Check</h3>

<p>As suggested by <a href="https://twitter.com/joernchen">Joernchen</a>, Brakeman will now look for user input in session keys which can lead to session manipulation.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/720">changes</a>)</p>

<h3 id="optional-check-for-weak-hashes">Optional Check for Weak Hashes</h3>

<p>An optional check to look for use of MD5 and SHA1 has been added to this release. Run with <code class="highlighter-rouge">-t WeakHash</code> to use just this optional check or <code class="highlighter-rouge">-A</code> to run all checks.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/722">changes</a>)</p>

<h3 id="windows-paths">Windows Paths</h3>

<p><a href="https://github.com/spcoder">Cody Frederick</a> fixed an issue with determining absolute paths on Windows.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/714">changes</a>)</p>

<h3 id="search-for-methods-by-regex">Search for Methods by Regex</h3>

<p><a href="https://github.com/aianus">Alex Ianus</a> re-introduced the ability to search the CallIndex with regular expressions for methods:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tracker.find_call(method: /_something$/)
</code></pre></div></div>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/710">changes</a>)</p>

<h3 id="haml-processing">Haml Processing</h3>

<p>Haml users may have noticed warnings with <code class="highlighter-rouge">find_and_preserve(Haml::Filters::Javascript.render_with_options(...))</code> in them. This has been fixed so <code class="highlighter-rouge">find_and_preserve</code> is treated as though it just passes through its arguments. Calls to <code class="highlighter-rouge">render_with_options</code> will be treated as unescaped output.</p>

<p>Along with this change, <code class="highlighter-rouge">j</code> and <code class="highlighter-rouge">escape_javascript</code> will be considered safe inside <code class="highlighter-rouge">:javascript</code> filters in Haml.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/716">changes</a>)</p>

<h3 id="chained-assignment">Chained Assignment</h3>

<p>Chained assignments like <code class="highlighter-rouge">a = b = c = 1</code> will now be handled correctly. This fixes <a href="https://stackoverflow.com/questions/11314450/how-to-secure-link-to-variable-cross-site-scripting-vulnerabilities">a very old issue from 2012</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/718">changes</a>)</p>

<h3 id="trying-more">Trying More</h3>

<p>While Brakeman already treated <code class="highlighter-rouge">a.try(:b)</code> like <code class="highlighter-rouge">a.b()</code>, there is a surprising amount of code which does <code class="highlighter-rouge">a.try(&amp;:b)</code>. This is totally unncessary, but Brakeman now handles it as well.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/717">changes</a>)</p>

<h3 id="more-arel-whitelisting">More Arel Whitelisting</h3>

<p>A number of Arel methods have been whitelisted to avoid warning about them inside SQL query building.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/719">changes</a>)</p>

<h3 id="decorated-models-in-links">Decorated Models in Links</h3>

<p>If the Draper gem is used, Brakeman will ignore calls to <code class="highlighter-rouge">decorate</code> in <code class="highlighter-rouge">link_to</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/721">changes</a>)</p>

<h3 id="terminal-table">terminal-table</h3>

<p>Newer <a href="https://github.com/tj/terminal-table">terminal-table</a> releases are supported now and the dependency has been relaxed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/712">changes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA1 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cfd1840116c20b0b8932720fdaac09dd4e47091a  brakeman-3.1.1.gem
603389da732d307a014af445a1f312415b65a682  brakeman-min-3.1.1.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter, joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>, or hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a>.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/08/30/brakeman-3-dot-1-0-released">Brakeman 3.1.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-08-30 21:46:00 -0700" pubdate  updated >2015-08-30 21:46:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>There are several changes in this release which may affect consumers of the JSON report as well as anyone relying on the ignore configuration file. Please try out <a href="https://gist.github.com/presidentbeef/52d5cce0fd26b901179e">this script</a> to migrate ignore configurations.</p>

<p>Additionally, some dependencies have been updated to versions no longer supporting Ruby 1.8. As a consequence, Brakeman no longer runs “out of the box” on Ruby 1.8, although you may be able to use the <code class="highlighter-rouge">brakeman-min</code> gem. No more attempts will be made to support running on Ruby 1.8 in future releases. Please note that does not mean Ruby 1.8 code cannot be analyzed; that still works fine.</p>

<p><em>Changes since 3.0.5</em>:</p>

<ul>
  <li>Update dependencies to Ruby 1.8 incompatible versions</li>
  <li>Update render path information in JSON reports</li>
  <li>Remove renaming of several <code class="highlighter-rouge">Sexp</code> nodes</li>
  <li>Treat <code class="highlighter-rouge">html_safe</code> like <code class="highlighter-rouge">raw</code></li>
  <li>Use railties version if rails gem is missing (<a href="https://github.com/lucasmazza">Lucas Mazza</a>)</li>
  <li>Warn about unverified SSL mode in <code class="highlighter-rouge">Net::HTTP.start</code></li>
  <li>Expand XSS safe methods</li>
  <li>Avoid warning on path creation methods in <code class="highlighter-rouge">link_to</code></li>
  <li>Add support for <code class="highlighter-rouge">gems.rb</code>/<code class="highlighter-rouge">gems.locked</code> (<a href="https://github.com/presidentbeef/brakeman/pull/705">#705</a>)</li>
  <li>Fix low confidence XSS warning code</li>
  <li>Avoid duplicate <code class="highlighter-rouge">eval</code> warnings</li>
  <li>Convert YAML config keys to symbols (<a href="https://github.com/KarlGl">Karl Glaser</a>)</li>
</ul>

<h3 id="ruby-18-incompatibility">Ruby 1.8 Incompatibility</h3>

<p>Ruby 1.8.7 has been unsupported by the Ruby core team for over a year now (and that was after it had a six month extension). Several libraries Brakeman depends on have stopped supporting Ruby 1.8. Unfortunately, there is no way to specify depending on different gem versions for different Ruby versions. This left Brakeman in a difficult place - use old libraries (and cause conflicts in Gemfiles…), use new libraries (and lose 1.8 support), or don’t declare dependencies (and force users to install dependencies themselves). In the end, it seems most people are okay with dropping Ruby 1.8 support.</p>

<p>That being said, Brakeman 3.1.0 should run fine on Ruby 1.8 if dependencies are set up manually to be compatible.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/684">changes</a>)</p>

<h3 id="render-path-improvements">Render Path Improvements</h3>

<p>Previously, render paths were arrays of strings. The strings represented the locations of calls to <code class="highlighter-rouge">render</code> (implicit or explicit), either in the form <code class="highlighter-rouge">&lt;Controller&gt;#&lt;method&gt;</code> or <code class="highlighter-rouge">Template:&lt;template/path&gt;</code>. While the information was somewhat useful to humans, it was not easily manipulated by computers and it was difficult to link the strings back to application code.</p>

<p>Now, render paths are arrays of hashes. The hash has a <code class="highlighter-rouge">type</code> key with a value of either <code class="highlighter-rouge">controller</code> or <code class="highlighter-rouge">template</code>. For controllers, the hash includes <code class="highlighter-rouge">class</code>, <code class="highlighter-rouge">method</code>, <code class="highlighter-rouge">line</code>, and <code class="highlighter-rouge">file</code>. For templates, the hash includes <code class="highlighter-rouge">name</code>, <code class="highlighter-rouge">line</code>, and <code class="highlighter-rouge">file</code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
  {
    "type": "controller",
    "class": "ProductsController",
    "method": "create",
    "line": 50,
    "file": "app/controllers/products_controller.rb"
  },
  {
    "type": "template",
    "name": "products/new",
    "line": 2,
    "file": "app/views/products/new.html.erb"
  }
]
</code></pre></div></div>

<p>Implicit renders from controller actions point to the line at the end of the method.</p>

<p>Rendered templates in JSON reports used to include the render location as well. For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"location": {
  "type": "template",
  "template": "home/index (HomeController#index)"
}
</code></pre></div></div>

<p>Since this information is redundant with the render path, it has been removed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/702">changes</a>)</p>

<h3 id="s-expression-names">S-Expression Names</h3>

<p>Starting a long time ago, Brakeman rewrote several s-expression names for no reason other than clarity (for example, <code class="highlighter-rouge">dstr</code> becomes <code class="highlighter-rouge">string_interp</code>). However, not all nodes were changed, leading to code that must check for both the original name from RubyParser and Brakeman’s name. This leads to messy code and subtle bugs.</p>

<p>The following node names were removed: <code class="highlighter-rouge">string_interp</code>, <code class="highlighter-rouge">string_eval</code>, <code class="highlighter-rouge">methdef</code>, <code class="highlighter-rouge">selfdef</code>, <code class="highlighter-rouge">call_with_block</code>.</p>

<p>While this seems like a silly internal change, it will unfortunately change any fingerprints containing these node types. A <a href="https://gist.github.com/presidentbeef/52d5cce0fd26b901179e">quick script is available</a> to migrate ignore files without having to manually update the fingerprints.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/701">changes</a>)</p>

<h3 id="html_safe">html_safe</h3>

<p>As we hopefully all know now, <code class="highlighter-rouge">html_safe</code> is not safe, it marks a string so it is <em>not</em> escaped when output in a template. Since this is essentially the same as calling <code class="highlighter-rouge">raw</code> on a string, Brakeman will treat them both as unescaped output.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/675">changes</a>)</p>

<h3 id="use-railties-version">Use railties Version</h3>

<p>Thanks to <a href="https://github.com/lucasmazza">Lucas Mazza</a>, if an application depends on <code class="highlighter-rouge">railties</code> instead of <code class="highlighter-rouge">rails</code>, Brakeman will now use the gem version of <code class="highlighter-rouge">railties</code> as the Rails version.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/695/files">changes</a>)</p>

<h3 id="ssl-verify-mode">SSL Verify Mode</h3>

<p>As suggested by <a href="https://github.com/gmcnaughton">Gordon McNaughton</a>, Brakeman now warns when SSL certificate verification is turned off in calls to <code class="highlighter-rouge">Net::HTTP.start</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/694">changes</a>)</p>

<h3 id="safe-methods">Safe Methods</h3>

<p>The <code class="highlighter-rouge">--safe-methods</code> option (which only applies to XSS warnings) and <code class="highlighter-rouge">--url-safe-methods</code> (which applies to values pass to <code class="highlighter-rouge">link_to</code>) now work on methods that have a target. For example, <code class="highlighter-rouge">--url-safe-methods this_is_safe</code> will ignore <code class="highlighter-rouge">link_to util.this_is_safe(params[:x])</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/674">changes</a>)</p>

<h3 id="more-safe-methods">More Safe Methods</h3>

<p>Brakeman warns about user input in the href parameter of <code class="highlighter-rouge">link_to</code> because it is possible to pass in a string starting with <code class="highlighter-rouge">javascript:</code>, which will execute the XSS payload when the victim clicks on it. However, it will no longer warn about methods that look like path helpers or URL generation methods. It will still warn about URL methods on models, since those may be direct user input.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/674">changes</a>)</p>

<h3 id="gemsrbgemslocked">gems.rb/gems.locked</h3>

<p><code class="highlighter-rouge">gems.rb</code>/<code class="highlighter-rouge">gems.locked</code> are alternative names for <code class="highlighter-rouge">Gemfile</code>/<code class="highlighter-rouge">Gemfile.lock</code>. Brakeman now supports either pair.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/705">changes</a>)</p>

<h3 id="weak-confidence-xss-warnings">Weak Confidence XSS Warnings</h3>

<p>A small bug caused weak confidence XSS warnings to have a warning code of <code class="highlighter-rouge">5</code> (which is for unescaped JSON) instead of <code class="highlighter-rouge">2</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/commit/9fec336e7cbbbb74add9ef9c6c90c65efa0ebcc7">changes</a>)</p>

<h3 id="duplicate-eval-warnings">Duplicate Eval Warnings</h3>

<p>There should now be fewer duplicate warnings about dangerous calls to <code class="highlighter-rouge">eval</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/670/files">changes</a>)</p>

<h3 id="configuration-keys">Configuration Keys</h3>

<p><a href="https://github.com/KarlGl">Karl Glaser</a> added a change so Brakeman configuration files may use string or symbol keys in the YAML file. However, it is recommended to use <code class="highlighter-rouge">brakeman -C</code> to generate configurations automatically, because writing YAML by hand is annoying.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/696">changes</a>)</p>

<h3 id="internal-changes">Internal Changes</h3>

<p>Internally, most of the information Brakeman tracks is kept in hash tables. This is changing, starting with the addition of <code class="highlighter-rouge">Controller</code>, <code class="highlighter-rouge">Model</code>, <code class="highlighter-rouge">Template</code>, and <code class="highlighter-rouge">Config</code> classes.</p>

<p>Unfortunately, this will probably break any code that relies on Brakeman’s internals (such as custom checks).</p>

<p>Fortunately, in almost all cases it will simplify code and in many cases it just means changing a hash access (like <code class="highlighter-rouge">template[:name]</code>) to a method call (<code class="highlighter-rouge">template.name</code>).</p>

<p>See <a href="https://github.com/presidentbeef/brakeman/pull/690">the pull request</a> for examples.</p>

<p>Also note this is just the beginning of these internal changes…sorry! Hopefully this leads to improvements and makes it easier to write Brakeman code.</p>

<h3 id="shas">SHAs</h3>

<p>The SHA1 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>236af597e5cbcc0e647c02c4087ceb5965510435  brakeman-3.1.0.gem
fe06faf67e781c4c4dc5ee362918ef2dfd8e1ce2  brakeman-min-3.1.0.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>.</p>

</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/06/19/brakeman-3-dot-0-5-released">Brakeman 3.0.5 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-06-19 18:09:00 -0700" pubdate  updated >2015-06-19 18:09:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>And this is why you don’t rush out releases.</p>

<p><em>Changes since 3.0.4</em>:</p>

<ul>
  <li>Fix check for CVE-2015-3227 (<a href="https://github.com/presidentbeef/brakeman/issues/667">#667</a>)</li>
</ul>

<h3 id="fix-cve-2015-3227-check">Fix CVE-2015-3227 Check</h3>

<p>Includes information that Rails 3.2.22 is the fix version for anything before Rails 4.0. Fixes warning message when exact Rails version cannot be determined. Fixes link URL to point to the CVE announcement.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/668">changes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA1 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b78e11b745128ed7f9acd5d0c4f5e0e3a81f4d07  brakeman-min-3.0.5.gem
c62cc782595d4995aa385b6bd96c2485ac932077  brakeman-3.0.5.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>.</p>

</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/06/18/brakeman-3-dot-0-4-released">Brakeman 3.0.4 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-06-18 10:50:00 -0700" pubdate  updated >2015-06-18 10:50:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>This is a small release prompted by Tuesday’s CVE announcements. New checks for the CVEs directly in Rails have been added, and can also test for the suggested workarounds. Please consider using <a href="https://github.com/rubysec/bundler-audit">bundler-audit</a> for detecting known vulnerable versions of gems, as Brakeman has only limited coverage.</p>

<p>Note this release also upgrades the RubyParser dependency. The latest RubyParser has several bug fixes and initial support for new Ruby 2.2 syntax.</p>

<p><em>Changes since 3.0.3</em>:</p>

<ul>
  <li>Add check for CVE-2015-3226 (XSS via JSON keys)</li>
  <li>Add check for CVE-2015-3227 (XML DoS)</li>
  <li>Treat <code class="highlighter-rouge">&lt;%==</code> as unescaped output (<a href="https://github.com/presidentbeef/brakeman/issues/661">#661</a>)</li>
  <li>Update <code class="highlighter-rouge">ruby_parser</code> dependency to 3.7.0</li>
</ul>

<h3 id="cross-site-scripting-in-json">Cross Site Scripting in JSON</h3>

<p><a href="https://groups.google.com/d/msg/rubyonrails-security/7VlB_pck3hU/3QZrGIaQW6cJ">CVE-2015-3226</a> is an issue with converting hashes to JSON. The keys do not properly escape HTML entities, leading to potential cross site scripting vulnerabilities. Brakeman will warn unless the workaround is included in an initializer (essentially verbatim). The warning is high confidence if there is evidence of explicitly converting values to JSON, otherwise medium.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/665">changes</a>)</p>

<h3 id="xml-denial-of-service">XML Denial of Service</h3>

<p><a href="https://groups.google.com/d/msg/rubyonrails-security/bahr2JLnxvk/x4EocXnHPp8J">CVE-2015-3227</a> is a potential denial of service when parsing deeply nested XML requests. Brakeman will warn about this unless there is an initializer changing the XML parser as described in the CVE. Currently it looks for either <code class="highlighter-rouge">LibXML</code> or <code class="highlighter-rouge">Nokogiri</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/666">changes</a>)</p>

<h3 id="double-equals-is-unescaped-output">Double Equals is Unescaped Output</h3>

<p>Brakeman will now treat <code class="highlighter-rouge">&lt;%== x %&gt;</code> in ERB templates as unescaped output.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/663">changes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA1 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bf6ae72a0b516ecf65b9165d07e86259ef9fa5d3  brakeman-3.0.4.gem
c1c2ea5402d8a89fe4a645947ec324d0603d3976  brakeman-min-3.0.4.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>.</p>

</div>
  
  


  </article>

<nav role="pagination">
  <div>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</nav>

</div>
<aside role=sidebar>
  <section>
  <p></p>
  <p>Brakeman is a free vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="/docs/quickstart">Get started!</a></p>
</section>

  <section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="https://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>

  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2023/02/21/brakeman-5-dot-4-dot-1-released">Brakeman 5.4.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/11/17/brakeman-5-dot-4-dot-0-released">Brakeman 5.4.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/08/09/brakeman-5-dot-3-dot-0-released">Brakeman 5.3.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/01/brakeman-5-dot-2-dot-3-released">Brakeman 5.2.3 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/04/06/brakeman-5-dot-2-dot-2-released">Brakeman 5.2.2 Released</a>
      </li>
    
  </ul>
</section>

</aside>

    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
