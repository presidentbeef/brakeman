
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman</title>
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="https://brakemanscanner.org/blog/page/11/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="feed.xml" rel="alternate" title="Brakeman" type="application/atom+xml"/>
  

  

  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@brakeman" />
<meta name="twitter:title" content="Brakeman Security Scanner" />
<meta name="twitter:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
<meta name="twitter:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman</a></h1>
  
    <h2>Ruby on Rails Static Analysis Security Tool</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:https://brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2016/05/05/brakeman-3-dot-3-0-released">Brakeman 3.3.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2016-05-05 09:49:00 -0700" pubdate  updated >2016-05-05 09:49:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>Brakeman 3.3.0 introduces a new packaging method for Brakeman which vendors all dependencies and does not include any gem dependencies in the gemspec. Please test and provide feedback if it does not work as expected.</p>

<p><em>Changes since 3.2.1</em>:</p>

<ul>
  <li>Bundle all dependencies in gem</li>
  <li>Return exit code <code class="language-plaintext highlighter-rouge">4</code> if no Rails application is detected (<a href="https://github.com/presidentbeef/brakeman/issues/869">#869</a>)</li>
  <li>Add optional check for secrets in source code (<a href="https://github.com/presidentbeef/brakeman/issues/201">#201</a>)</li>
  <li>Track constants globally</li>
  <li>Skip if branches with <code class="language-plaintext highlighter-rouge">Rails.env.test?</code> (<a href="https://github.com/presidentbeef/brakeman/issues/862">#862</a>)</li>
  <li>Skip processing obviously false if branches (more broadly)</li>
  <li>Handle HAML <code class="language-plaintext highlighter-rouge">find_and_preserve</code> with a block (<a href="https://github.com/presidentbeef/brakeman/issues/837">#837</a>)</li>
  <li>Process <code class="language-plaintext highlighter-rouge">Array#first</code></li>
  <li>Allow non-Hash arguments in <code class="language-plaintext highlighter-rouge">protect_from_forgery</code> (<a href="https://github.com/jsyeo">Jason Yeo</a>)</li>
  <li>Avoid warning about <code class="language-plaintext highlighter-rouge">u</code> helper (<a href="https://github.com/cdollins">Chad Dollins</a>)</li>
  <li>Avoid warning about mass assignment and SQL injection with <code class="language-plaintext highlighter-rouge">params.slice</code> (<a href="https://github.com/presidentbeef/brakeman/issues/866">#866</a>)</li>
  <li>Avoid warning about <code class="language-plaintext highlighter-rouge">slice</code> in <code class="language-plaintext highlighter-rouge">redirect_to</code> and <code class="language-plaintext highlighter-rouge">link_to</code> (<a href="https://github.com/presidentbeef/brakeman/issues/832">#832</a>)</li>
  <li>Avoid warning on <code class="language-plaintext highlighter-rouge">popen</code> with array (<a href="https://github.com/presidentbeef/brakeman/issues/851">#851</a>)</li>
  <li>[Code Climate engine] When possible, output to /dev/stdout (<a href="https://github.com/GordonDiggs">Gordon Diggs</a>)</li>
  <li>[Code Climate engine] Remove nil entries from <code class="language-plaintext highlighter-rouge">include_paths</code> (<a href="https://github.com/GordonDiggs">Gordon Diggs</a>)</li>
  <li>[Code Climate engine] Report end lines for issues (<a href="https://github.com/GordonDiggs">Gordon Diggs</a>)</li>
</ul>

<h3 id="dependency-bundling">Dependency Bundling</h3>

<p>In its gem form, Brakeman no longer declares any external dependencies. Its dependencies are bundled with the gem itself. This should prevent the conflicts which sometimes occur when Brakeman is declared as a dependency of a Rails application. The disadvantage is you will no longer be able to update Brakeman dependencies (like RubyParser) without updating Brakeman itself.</p>

<p>As this is a new way of distributing Brakeman, please report any issues that may arise.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/845">changes</a>)</p>

<h3 id="new-exit-code">New Exit Code</h3>

<p>A new exit code has been added for the case when Brakeman does not detect a Rails application.</p>

<p>For reference, these are Brakeman’s current exit codes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">0</code> - Normal exit</li>
  <li><code class="language-plaintext highlighter-rouge">3</code> - Warnings found (with <code class="language-plaintext highlighter-rouge">-z</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">4</code> - No Rails application detected</li>
  <li><code class="language-plaintext highlighter-rouge">255</code> - Error</li>
</ul>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/870">changes</a>)</p>

<h3 id="secrets-check">Secrets Check</h3>

<p>A new optional check has been added to look for hard-coded secrets in the source code. It will warn when constants like <code class="language-plaintext highlighter-rouge">PASSWORD</code> are assigned string literals. To run the new check, use <code class="language-plaintext highlighter-rouge">-t Secrets</code> or <code class="language-plaintext highlighter-rouge">-A</code> to run all checks including optional ones.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/861">changes</a>)</p>

<h3 id="constant-values">Constant Values</h3>

<p>This release includes initial support for tracking and matching constants across the application. For example, if a model contains a constant <code class="language-plaintext highlighter-rouge">Model::KEYS</code> which is used elsewhere, Brakeman should be able to track this value. This helps prevents false positives when safe values have been declared as constants.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/855">changes</a>)</p>

<h3 id="skipping-test-code">Skipping Test Code</h3>

<p>Brakeman will now ignore <code class="language-plaintext highlighter-rouge">if</code> branches that check <code class="language-plaintext highlighter-rouge">Rails.env.test?</code>. Additionally, branch skipping behavior (e.g. <code class="language-plaintext highlighter-rouge">if false...</code>) has been expanded to most of Brakeman’s processing instead of just in data flow analysis.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/868">changes</a>)</p>

<h3 id="haml-find_and_preserve">HAML <code class="language-plaintext highlighter-rouge">find_and_preserve</code></h3>

<p>Brakeman will now handle uses of <code class="language-plaintext highlighter-rouge">find_and_preserve</code> in HAML with a block.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/839">changes</a>)</p>

<h3 id="arrayfirst">Array#first</h3>

<p>Calls to <code class="language-plaintext highlighter-rouge">Array#first</code> will be replaced with the first value in the array when known.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/856">changes</a>)</p>

<h3 id="forgery-option">Forgery Option</h3>

<p><a href="https://github.com/jsyeo">Jason Yeo</a> provided a fix for when Brakeman encounters a non-Hash argument to <code class="language-plaintext highlighter-rouge">protect_from_forgery</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/849">changes</a>)</p>

<h3 id="u-helper"><code class="language-plaintext highlighter-rouge">u</code> Helper</h3>

<p><a href="https://github.com/cdollins">Chad Dollins</a> fixed XSS false positives when the <code class="language-plaintext highlighter-rouge">u</code> alias for <code class="language-plaintext highlighter-rouge">url_encode</code> is used.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/863">changes</a>)</p>

<h3 id="fewer-slice-false-positives">Fewer <code class="language-plaintext highlighter-rouge">slice</code> False Positives</h3>

<p>Brakeman should no longer warn when using <code class="language-plaintext highlighter-rouge">params.slice</code> in mass assignment, SQL injection, links, and open redirects.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/867">changes</a> and <a href="https://github.com/presidentbeef/brakeman/pull/871">other changes</a>)</p>

<h3 id="safe-popen">Safe popen</h3>

<p>Brakeman will no longer warn about uses of <code class="language-plaintext highlighter-rouge">popen</code> when the argument is an array, in which case the arguments are escaped.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/854">changes</a>)</p>

<h3 id="code-climate-engine">Code Climate Engine</h3>

<p><a href="https://github.com/GordonDiggs">Gordon Diggs</a> provided several improvements to the Code Climate Engine in this release:</p>

<ul>
  <li>Remove <code class="language-plaintext highlighter-rouge">nil</code> entries from the <code class="language-plaintext highlighter-rouge">include_paths</code> option</li>
  <li>Force output to stdout when possible</li>
  <li>Report end lines to conform with spec</li>
</ul>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c01ec64d35218887fc5ea2ae8babc88e9e0e7cc3c161b020725d2b17c4189858  brakeman-3.3.0.gem
f1adce1a696799342dc9f50b51975024060360dc9018358c5d8e34c1c4681bd1  brakeman-min-3.3.0.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Thank you to everyone who reported bugs and contributed improvements in this release.</p>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a> for questions and discussion. Please note the mailing list is no longer in use and has apparently not been delivering mail for some time.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2016/02/24/brakeman-3-dot-2-1-released">Brakeman 3.2.1 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2016-02-24 21:36:00 -0800" pubdate  updated >2016-02-24 21:36:00 -0800</time>


</p>
    
  </header>


  <div class="entry-content"><p><em>Changes since 3.2.0</em>:</p>

<ul>
  <li>Remove <code class="language-plaintext highlighter-rouge">multi_json</code> dependency from <code class="language-plaintext highlighter-rouge">bin/brakeman</code></li>
</ul>

<p>As pointed out by <a href="https://github.com/bf4">Benjamin Fleischer</a>, there was a lingering use of <code class="language-plaintext highlighter-rouge">multi_json</code> in <code class="language-plaintext highlighter-rouge">bin/brakeman</code>. This only caused a problem when using the <code class="language-plaintext highlighter-rouge">--compare</code> option.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/831">changes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4a7e7a6e9ad9fed22f727fb8d471de145f55d97465b4dfb4935e3e8379667425  brakeman-min-3.2.1.gem
901202b04b1cae0a781b5a6bae2db3eecd35e9f0a044fbfaa31cac63ab636449  brakeman-3.2.1.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a> for questions and discussion. Please note the mailing list is no longer in use and has apparently not been delivering mail for some time.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2016/02/24/brakeman-3-dot-2-0-released">Brakeman 3.2.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2016-02-24 15:46:00 -0800" pubdate  updated >2016-02-24 15:46:00 -0800</time>


</p>
    
  </header>


  <div class="entry-content"><p>This release sheds a couple dependencies and adds support for new Ruby 2.3 syntax.</p>

<p><em>Changes since 3.1.5</em>:</p>

<ul>
  <li>Support calls using <code class="language-plaintext highlighter-rouge">&amp;.</code> operator (<a href="https://github.com/presidentbeef/brakeman/issues/796">#796</a>)</li>
  <li>Handle CoffeeScript in HAML (<a href="https://github.com/presidentbeef/brakeman/issues/813">#813</a>)</li>
  <li>Avoid render warnings about <code class="language-plaintext highlighter-rouge">params[:action]</code>/<code class="language-plaintext highlighter-rouge">params[:controller]</code> (<a href="https://github.com/presidentbeef/brakeman/issues/812">#812</a>)</li>
  <li>Only update ignore config file on changes (<a href="https://github.com/presidentbeef/brakeman/issues/824">#824</a>)</li>
  <li>Sort ignore config file</li>
  <li>Index calls in class bodies but outside methods (<a href="https://github.com/presidentbeef/brakeman/issues/814">#814</a>)</li>
  <li>Skip Symbol DoS check on Rails 5</li>
  <li>Fix finding calls with <code class="language-plaintext highlighter-rouge">targets: nil</code></li>
  <li>Remove <code class="language-plaintext highlighter-rouge">fastercsv</code> dependency</li>
  <li>Remove <code class="language-plaintext highlighter-rouge">multi-json</code> dependecy</li>
</ul>

<h3 id="ruby-23-lonely-operator">Ruby 2.3 Lonely Operator</h3>

<p>With the update of RubyParser to 3.8.1 (and Ruby2Ruby to 2.3), Brakeman now supports the new <code class="language-plaintext highlighter-rouge">&amp;.</code> operator and should treat it like a regular method call.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/827">changes</a>)</p>

<h3 id="coffeescript-in-haml">CoffeeScript in HAML</h3>

<p>This release handles CoffeeScript embedded in HAML better and should reduce some false positives.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/817">changes</a>)</p>

<h3 id="render-warnings-on-safe-parameters">Render Warnings on Safe Parameters</h3>

<p>Brakeman will no longer warn on <code class="language-plaintext highlighter-rouge">render params[:action]</code> or <code class="language-plaintext highlighter-rouge">render params[:controller]</code>, as those values are not able to be controlled by an attacker.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/816">changes</a>)</p>

<h3 id="ignore-configuration-changes">‘Ignore’ Configuration Changes</h3>

<p>The “ignore config” files generated by Brakeman are now sorted and will only update on changes, instead of always writing a new file.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/828">changes</a>)</p>

<h3 id="index-calls-outside-methods">Index Calls Outside Methods</h3>

<p>Calls that are outside methods (but inside class bodies) can now be found in Brakeman checks.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/815">changes</a>)</p>

<h3 id="skip-symbol-dos-with-rails-5">Skip Symbol DoS with Rails 5</h3>

<p>Rails 5 requires Ruby &gt;= 2.2.2, which now garbage collects symbols. If the <code class="language-plaintext highlighter-rouge">SymbolDoS</code> check is run on a Rails 5 application (it’s already optional), it will no longer warn.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/829">changes</a>)</p>

<h3 id="dependency-removal">Dependency Removal</h3>

<p>Since Ruby 1.8 is no longer supported, this release removes the legacy <code class="language-plaintext highlighter-rouge">fastercsv</code> and <code class="language-plaintext highlighter-rouge">multi-json</code> dependencies.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/822">fastercsv</a>, <a href="https://github.com/presidentbeef/brakeman/pull/818">multi-json</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>d1d1468fcca0ec5dd99c53af2018b781a8efe06483190aef9d13b1abcbb7e2a0  brakeman-min-3.2.0.gem
07023148564668cc39911eec0354ca03774be1f8a03d66162f53a5dde44bb502  brakeman-3.2.0.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Thank you to everyone who reported bugs and contributed improvements in this release.</p>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a> for questions and discussion. Please note the mailing list is no longer in use and has apparently not been delivering mail for some time.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2016/01/28/brakeman-3-dot-1-5-released">Brakeman 3.1.5 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2016-01-28 08:26:00 -0800" pubdate  updated >2016-01-28 08:26:00 -0800</time>


</p>
    
  </header>


  <div class="entry-content"><p>This release adds warnings for the latest Rails CVEs.</p>

<p><em>Changes since 3.1.4</em>:</p>

<ul>
  <li>Warn about RCE with <code class="language-plaintext highlighter-rouge">render params</code> (CVE-2016-0752)</li>
  <li>Add check for <code class="language-plaintext highlighter-rouge">strip_tags</code> XSS (CVE-2015-7579)</li>
  <li>Add check for <code class="language-plaintext highlighter-rouge">sanitize</code> XSS (CVE-2015-7578/80)</li>
  <li>Add check for basic auth timing attack (CVE-2015-7576)</li>
  <li>Add check for <code class="language-plaintext highlighter-rouge">reject_if</code> proc bypass (CVE-2015-7577)</li>
  <li>Add check for denial of service via routes (CVE-2015-7581)</li>
  <li>Add check for mime-type denial of service (CVE-2016-0751)</li>
  <li>Check for implicit integer comparison in dynamic finders</li>
  <li>Support directories better with <code class="language-plaintext highlighter-rouge">--only-files</code> and <code class="language-plaintext highlighter-rouge">--skip-files</code> (<a href="https://github.com/ptoomey3">Patrick Toomey</a>)</li>
  <li>Fix CodeClimate construction of <code class="language-plaintext highlighter-rouge">--only-files</code> (<a href="https://github.com/wfleming">Will Fleming</a>)</li>
  <li>Avoid warning about <code class="language-plaintext highlighter-rouge">permit</code> in SQL (<a href="https://github.com/presidentbeef/brakeman/issues/669">669</a>)</li>
  <li>Avoid warning on user input in comparisons</li>
  <li>Handle guards using <code class="language-plaintext highlighter-rouge">detect</code> (<a href="https://github.com/presidentbeef/brakeman/issues/376">376</a>)</li>
  <li>Handle module names with self methods (<a href="https://github.com/presidentbeef/brakeman/issues/785">#785</a>)</li>
  <li>Add session manipulation documentation (<a href="https://github.com/presidentbeef/brakeman/pull/791">#791</a>)</li>
  <li>Add initial Rails 5 support</li>
</ul>

<h3 id="render-remote-code-execution">Render Remote Code Execution</h3>

<p>First up, <a href="https://groups.google.com/d/msg/rubyonrails-security/335P1DcLG00/OfB9_LhbFQAJ">CVE-2016-0752</a> allows an attacker to render files outside of the application path as well as <a href="https://nvisium.com/blog/2016/01/26/rails-dynamic-render-to-rce-cve-2016-0752/">execute arbitrary code</a>. Passing in <code class="language-plaintext highlighter-rouge">params</code> values directly is <a href="https://twitter.com/joernchen/status/456822118500823040">especially dangerous</a>. Brakeman has warned about passing user input to <code class="language-plaintext highlighter-rouge">render</code> since it was first released as “dynamic render path” warnings. For calls to <code class="language-plaintext highlighter-rouge">render</code> that directly pass in <code class="language-plaintext highlighter-rouge">params</code>, it has been changed to a remote code execution warning in affected versions.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/807">changes</a>)</p>

<h3 id="sanitization-xss">Sanitization XSS</h3>

<p><a href="https://groups.google.com/d/msg/rubyonrails-security/OU9ugTZcbjc/PjEP46pbFQAJ">CVE-2015-7579</a>, <a href="https://github.com/presidentbeef/brakeman/pull/807">CVE-2015-7578</a>, and <a href="https://groups.google.com/d/msg/rubyonrails-security/uh--W4TDwmI/m_CVZtdbFQAJ">CVE-2015-7580</a> are vulnerabilities in <code class="language-plaintext highlighter-rouge">rails-html-sanitizer</code> affecting the <code class="language-plaintext highlighter-rouge">strip_tags</code> and <code class="language-plaintext highlighter-rouge">sanitize</code> methods. Brakeman will mark uses of <code class="language-plaintext highlighter-rouge">strip_tags</code> and <code class="language-plaintext highlighter-rouge">sanitize</code> with <code class="language-plaintext highlighter-rouge">raw</code> or <code class="language-plaintext highlighter-rouge">html_safe</code> as high confidence warnings. Since these methods might be used in support gems, Brakeman will also generate a generic warning for the CVEs in apps using vulnerable versions of <code class="language-plaintext highlighter-rouge">rails-html-sanitizer</code>..</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/805">changes</a> plus <a href="https://github.com/presidentbeef/brakeman/pull/806">these</a>)</p>

<h3 id="basic-auth-timing-attack">Basic Auth Timing Attack</h3>

<p>The implementation of <code class="language-plaintext highlighter-rouge">http_basic_authenticate_with</code> did not use constant-time comparison when checking passwords, allowing timing attacks as described in <a href="https://groups.google.com/d/msg/rubyonrails-security/ANv0HDHEC3k/mt7wNGxbFQAJ">CVE-2015-7576</a>. Brakeman will warn about affected applications using <code class="language-plaintext highlighter-rouge">http_basic_authenticate_with</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/800">changes</a>)</p>

<h3 id="bypass-record-deletion-filtering">Bypass Record Deletion Filtering</h3>

<p><a href="https://groups.google.com/d/msg/rubyonrails-security/cawsWcQ6c8g/tegZtYdbFQAJ">CVE-2015-7577</a> is a bug where the <code class="language-plaintext highlighter-rouge">reject_if</code> option to <code class="language-plaintext highlighter-rouge">accepts_nested_attributes_for</code> will not be called if <code class="language-plaintext highlighter-rouge">allow_destroy</code> is set to <code class="language-plaintext highlighter-rouge">false</code>. Brakeman will warn on applications which meet all of these criteria and do not include the workaround in an initializer.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/804">changes</a>)</p>

<h3 id="wildcard-route-denial-of-service">Wildcard Route Denial of Service</h3>

<p>Brakeman will warn about <a href="https://groups.google.com/d/msg/rubyonrails-security/dthJ5wL69JE/YzPnFelbFQAJ">CVE-2015-7581</a> when it detects routes containing <code class="language-plaintext highlighter-rouge">':controller'</code> wildcards on affected versions of Rails. These routes can be abused to cause a denial of service.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/808">changes</a>)</p>

<h3 id="mime-type-denial-of-service">Mime-type Denial of Service</h3>

<p>Sending many different mime-types via <code class="language-plaintext highlighter-rouge">Accept</code> headers can cause a denial of service. Brakeman will warn about <a href="https://groups.google.com/d/msg/rubyonrails-security/9oLY_FCzvoc/w9oI9XxbFQAJ">CVE-2016-0751</a> in affected versions of Rails unless the workaround is present.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/801">changes</a>)</p>

<h3 id="mysql-implicit-integer-conversion">MySQL Implicit Integer Conversion</h3>

<p>As <a href="http://www.phenoelit.org/blog/archives/2013/02/05/mysql_madness_and_rails/">described here</a>, MySQL will convert string values to match integer input - often leading to <code class="language-plaintext highlighter-rouge">0=0</code> comparisons in queries which will always return true. Brakeman will warn when an application uses MySQL and <code class="language-plaintext highlighter-rouge">find_by_*</code> dynamic finders on potentially sensitive fields like <code class="language-plaintext highlighter-rouge">password</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/798">changes</a>)</p>

<h3 id="better-directory-support-when-skipping-files">Better Directory Support When Skipping Files</h3>

<p><a href="https://github.com/ptoomey3">Patrick Toomey</a> provided a patch to better explicitly match directories with <code class="language-plaintext highlighter-rouge">--only-files</code> and <code class="language-plaintext highlighter-rouge">--skip-files</code>. See the <a href="https://github.com/presidentbeef/brakeman/blob/82de21d7c85acd8980ae7c4b86d77207f73b3444/OPTIONS.md#scanning-options">updated options</a> for details.</p>

<p><em>Please note use of <code class="language-plaintext highlighter-rouge">--only-files</code> is strongly discouraged. Brakeman is designed to scan entire applications.</em></p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/764">changes</a>)</p>

<h3 id="codeclimate-file-restriction">CodeClimate File Restriction</h3>

<p>The <code class="language-plaintext highlighter-rouge">include_paths</code> configuration for the CodeClimate engine has been updated by <a href="https://github.com/wfleming">Will Fleming</a> to handle spaces and other special characters.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/803/">changes</a>)</p>

<h3 id="permit-permit-in-sql">Permit <code class="language-plaintext highlighter-rouge">permit</code> in SQL</h3>

<p>Surprisingly, it is safe and effective to use <code class="language-plaintext highlighter-rouge">params.permit</code> in SQL queries, as it will always return a hash of values which will be interpreted as parameterized values. Brakeman will no longer warn about uses of <code class="language-plaintext highlighter-rouge">permit</code> in SQL queries.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/795">changes</a>)</p>

<h3 id="user-input-in-comparisons">User Input in Comparisons</h3>

<p>Brakeman will no longer warn about user input in comparisons, such as <code class="language-plaintext highlighter-rouge">'x' == params[:x]</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/793">changes</a>)</p>

<h3 id="detect-detect-guard-statements">Detect <code class="language-plaintext highlighter-rouge">detect</code> Guard Statements</h3>

<p>Fixing a <a href="https://github.com/presidentbeef/brakeman/issues/376">bug</a> filed almost 2.5 years ago, Brakeman will now recognize <code class="language-plaintext highlighter-rouge">Array#detect</code>/<code class="language-plaintext highlighter-rouge">Array#find</code> being used to whitelist values.</p>

<p>For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if safe_name = [:A, :B, :C].detect { |v| v == params[:v] }
  safe_name.constantize
end
</code></pre></div></div>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/794/">changes</a>)</p>

<h3 id="self-methods-with-modules">Self Methods with Modules</h3>

<p>Definitions of self methods inside nested modules was broken and is now fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/792">changes</a>)</p>

<h3 id="session-manipulation-documentation">Session Manipulation Documentation</h3>

<p>Documentation for session manipulation warnings has now been added to <a href="http://brakemanscanner.org/docs/warning_types/session_manipulation/">the Brakeman site</a> and for the CodeClimate engine.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/791">changes</a>)</p>

<h3 id="rails-5-support">Rails 5 Support</h3>

<p>Initial support for Rails 5 has been added to Brakeman, including a <code class="language-plaintext highlighter-rouge">-5</code> option to force Rails 5 mode. However, no special analysis or warnings specific to Rails 5 have been implemented yet.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/799">changes</a>)</p>

<h3 id="cve-2016-0753">CVE-2016-0753?</h3>

<p>This release does not include a warning for <a href="https://groups.google.com/d/msg/rubyonrails-security/6jQVC1geukQ/8oYETcxbFQAJ">CVE-2016-0753</a>. The vulnerability appears to require using <code class="language-plaintext highlighter-rouge">permit!</code> which Brakeman already warns about, or else passing in hashes that are not query parameters which Brakeman would not be able to detect as dangerous or benign.</p>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fa9528859d4baa8cd4fbe67f634cd3741ee85d553bf59c4b2315a5ccb2976835  brakeman-3.1.5.gem
3248084efe71fcbb0c65b36e71ff0c06e65ac6bce1817a6f9d38ae0657a95bde  brakeman-min-3.1.5.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Thank you to everyone who reported bugs and contributed improvements in this release.</p>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter or hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a>. Please note the mailing list is no longer in use and has apparently not been delivering mail for some time.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2015/12/22/brakeman-3-dot-1-4-released">Brakeman 3.1.4 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2015-12-22 10:41:00 -0800" pubdate  updated >2015-12-22 10:41:00 -0800</time>


</p>
    
  </header>


  <div class="entry-content"><p>Brakeman Pi!</p>

<p><em>Changes since 3.1.3</em>:</p>

<ul>
  <li>Emit Brakeman’s native fingerprints for Code Climate engine (<a href="https://github.com/noahd1">Noah Davis</a>)</li>
  <li>Ignore <code class="language-plaintext highlighter-rouge">secrets.yml</code> if in .gitignore (<a href="https://github.com/presidentbeef/brakeman/issues/777">#777</a>)</li>
  <li>Work around <code class="language-plaintext highlighter-rouge">safe_yaml</code> error (<a href="https://github.com/presidentbeef/brakeman/issues/778">#778</a>)</li>
  <li>Increase test coverage for option parsing (<a href="https://github.com/Zanadar">Zander Mackie</a>)</li>
  <li>Clean up Ruby warnings (<a href="https://github.com/andyw8">Andy Waite</a>)</li>
</ul>

<h3 id="code-climate-fingerprints">Code Climate Fingerprints</h3>

<p>The output format for Code Climate has been updated to include warning fingerprints as generated by Brakeman.</p>

<h3 id="ignored-secretsyml">Ignored secrets.yml</h3>

<p>If <code class="language-plaintext highlighter-rouge">secrets.yml</code> is ignored via <code class="language-plaintext highlighter-rouge">.gitignore</code>, Brakeman will ignore it, too.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/781">changes</a>)</p>

<h3 id="safe-yaml-error">Safe YAML Error</h3>

<p>For some people, in some cases, <code class="language-plaintext highlighter-rouge">date</code> is not loaded prior to loading <code class="language-plaintext highlighter-rouge">safe_yaml</code>. This release ensures <code class="language-plaintext highlighter-rouge">date</code> is loaded before using SafeYAML and only loads <code class="language-plaintext highlighter-rouge">safe_yaml</code> on demand.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/782">changes</a>)</p>

<h3 id="test-coverage-and-warning-cleanup">Test Coverage and Warning Cleanup</h3>

<p>Thanks to Zander Mackie for improving test coverage (up to 91.24%) by writing tests for the command line options and thanks to Andy Waite for cleaning up various Ruby warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/780">test changes</a>, <a href="https://github.com/presidentbeef/brakeman/pull/784">warning fixes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA256 sums for this release are</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>d53103d40a7ddf6ee2737770ecd0353b945a757d0fab6c50cde1eefba31f6197  brakeman-3.1.4.gem
a67d7c96090bc3b8193cf3b5db7af62ce719b9277d1b818ec6e9f96a52ad0caa  brakeman-min-3.1.4.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Thank you to everyone who reported bugs and contributed improvements in this release.</p>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter, joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>, or hanging out <a href="https://gitter.im/presidentbeef/brakeman">on Gitter</a>.</p>
</div>
  
  


  </article>

<nav role="pagination">
  <div>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</nav>

</div>
<aside role=sidebar>
  <section>
  <p></p>
  <p>Brakeman is a free vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="/docs/quickstart">Get started!</a></p>
</section>

  <section>
  <script type='text/javascript'>
    $(document).ready(function(){
      $("#github").GitHubBadge({
        login: "presidentbeef",
        kind: "project",
        repo_name: "brakeman",
        include_github_logo: false,
        image_path: "",
        commit_count: "1",
        issue_count: "0",
        repo_count: "0"
      });
    });
  </script>
  <div id="github"></div>
  <a href="https://dl.circleci.com/status-badge/redirect/gh/presidentbeef/brakeman/tree/main"><img src="https://dl.circleci.com/status-badge/img/gh/presidentbeef/brakeman/tree/main.svg?style=svg" /></a>
</section>

  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2023/05/24/brakeman-6-dot-0-released">Brakeman 6.0.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/02/21/brakeman-5-dot-4-dot-1-released">Brakeman 5.4.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/11/17/brakeman-5-dot-4-dot-0-released">Brakeman 5.4.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/08/09/brakeman-5-dot-3-dot-0-released">Brakeman 5.3.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/01/brakeman-5-dot-2-dot-3-released">Brakeman 5.2.3 Released</a>
      </li>
    
  </ul>
</section>

</aside>

    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
