
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman</title>
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="https://brakemanscanner.org/blog/page/22/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="feed.xml" rel="alternate" title="Brakeman" type="application/atom+xml"/>
  

  

  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@brakeman" />
<meta name="twitter:title" content="Brakeman Security Scanner" />
<meta name="twitter:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
<meta name="twitter:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman</a></h1>
  
    <h2>Ruby on Rails Static Analysis Security Tool</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:https://brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2012/02/25/brakeman-1-dot-4-0-released">Brakeman 1.4.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2012-02-25 09:57:00 +0000" pubdate  updated >2012-02-25 09:57:00 +0000</time>


</p>
    
  </header>


  <div class="entry-content"><p>This is not a big release, but it does add a new check. Also, processing for ERB templates with the <code class="language-plaintext highlighter-rouge">rails_xss</code> plugin has changed, so there is the possibility that line numbers for reported warnings will shift.</p>

<p><em>Changes since 1.3.0:</em></p>

<ul>
  <li>Add check for user input in link_to href parameter</li>
  <li>Match ERB processing to rails_xss plugin when plugin used</li>
  <li>Add Brakeman::Report#to_json, Brakeman::Warning#to_json</li>
  <li>Warnings below minimum confidence are dropped completely</li>
  <li>Brakeman.run will now always return a Tracker</li>
</ul>

<h3 id="new-check-for-link_to">New Check for link_to</h3>

<p><a href="https://github.com/oreoshake">Neil Matatall</a> has contributed a new check for the href parameter in <code class="language-plaintext highlighter-rouge">link_to</code>. Even if HTML escaped, some values can be dangerous, so this check will warn for user input in that parameter. See <a href="https://github.com/presidentbeef/brakeman/pull/45">here</a> for more details.</p>

<p>The <code class="language-plaintext highlighter-rouge">--url-safe-methods</code> option can be used to specify escaping methods which are safe for urls.</p>

<h3 id="erb-and-rails_xss">ERB and rails_xss</h3>

<p>The <code class="language-plaintext highlighter-rouge">rails_xss</code> plugin has some fixes for how Erbuis handles certain input. Brakeman now matches those changes, which fixes some parsing errors.</p>

<h3 id="internal-changes">Internal Changes</h3>

<p>There have been some changes which only impact those working with Brakeman as a library.</p>

<p>First, there is now json output for reports. This actually should be an output format option, but I did not realize it until writing this post. The next release will include this, though!</p>

<p>The way Brakeman handles the <code class="language-plaintext highlighter-rouge">--confidence-level</code> option has also changed. In the past, warnings would be filtered when output in a report. This meant, for example, that <code class="language-plaintext highlighter-rouge">tracker.checks.all_warnings</code> would still return warnings below the specified confidence level. It also caused problems because there were many places in the code where the warnings needed to be filtered. With this release, warnings below the confidence level will be dropped as soon as they are found and will not need to be filtered at any later point.</p>

<p>Lastly, <code class="language-plaintext highlighter-rouge">Brakeman.run</code> would return <code class="language-plaintext highlighter-rouge">false</code> if <code class="language-plaintext highlighter-rouge">--exit-on-warn</code> was set, and a <code class="language-plaintext highlighter-rouge">Tracker</code> object otherwise. This has changed. <code class="language-plaintext highlighter-rouge">Brakeman.run</code> will now always return a <code class="language-plaintext highlighter-rouge">Tracker</code> object and the logic for <code class="language-plaintext highlighter-rouge">--exit-on-warn</code> was pushed out to the Brakeman executable.</p>

<h3 id="report-issues">Report Issues</h3>

<p>As usual, please <a href="https://github.com/presidentbeef/brakeman/issues">report any issues</a>.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2012/02/08/brakeman-1-dot-3-0-released">Brakeman 1.3.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2012-02-08 15:11:00 +0000" pubdate  updated >2012-02-08 15:11:00 +0000</time>


</p>
    
  </header>


  <div class="entry-content"><p>Thanks to everyone who reported problems and suggestions this time around!</p>

<p>This release includes some new features, better performance on large projects, and more detection criteria. Warnings reported may change after upgrading.</p>

<p><em>Changes since 1.2.2:</em></p>

<ul>
  <li>Add file paths to HTML report</li>
  <li>Add caching of filters</li>
  <li>Add <code class="language-plaintext highlighter-rouge">--skip-files</code> option</li>
  <li>Add support for <code class="language-plaintext highlighter-rouge">attr_protected</code></li>
  <li>Add detection of request.env as user input</li>
  <li>Descriptions of checks in <code class="language-plaintext highlighter-rouge">-k</code> output</li>
  <li>Improved processing of named scopes</li>
  <li>Check for mass assignment in <code class="language-plaintext highlighter-rouge">ActiveRecord::Associations::AssociationCollection#build</code></li>
  <li>Better variable substitution</li>
  <li>Table output option for rescan reports</li>
</ul>

<h3 id="file-paths-in-html-report">File Paths in HTML Report</h3>

<p>In the HTML output, any warning which has context associated with it (visible when clicking on the warning message) will now include the file name at the top of the code snippet.</p>

<h3 id="filter-caching">Filter Caching</h3>

<p>Filters (using <code class="language-plaintext highlighter-rouge">before_filter</code>) are now only parsed once, instead of for everytime they are used. This has greatly improved performance when scanning some large projects.</p>

<h3 id="option-to-skip-files">Option to Skip Files</h3>

<p>A list of files to skip can be provided with the <code class="language-plaintext highlighter-rouge">--skip-files</code> option. This will skip any initializers, libraries, controllers, models, or views that match the file names provided. The file names to skip are matched against the end of the absolute path. That is, <code class="language-plaintext highlighter-rouge">blah.rb</code> will skip <em>any</em> file with a name ending in <code class="language-plaintext highlighter-rouge">blah.rb</code>. This means it is not necessary to provide the full path to a file.</p>

<h3 id="support-for-blacklisting-attributes">Support for Blacklisting Attributes</h3>

<p>Previously, Brakeman ignored uses of <code class="language-plaintext highlighter-rouge">attr_protected</code>. Ideally, <code class="language-plaintext highlighter-rouge">attr_accessible</code> should always be used to whitelist attributes that can be set using mass assignment. This way, attributes can never be “accidentally” exposed. However, it can also be tedious for large models.</p>

<p>With this release, Brakeman will downgrade mass assignment warnings to “weak” confidence if <code class="language-plaintext highlighter-rouge">attr_protected</code> is used, as well as suggesting that <code class="language-plaintext highlighter-rouge">attr_accessible</code> be used instead.</p>

<p>The <code class="language-plaintext highlighter-rouge">--ignore-protected</code> option can be used to suppress any warnings for models that use <code class="language-plaintext highlighter-rouge">attr_protected</code>.</p>

<h3 id="request-environment-is-user-input">Request Environment is User Input</h3>

<p><code class="language-plaintext highlighter-rouge">request.env</code> will now be treated as user input.</p>

<h3 id="check-descriptions">Check Descriptions</h3>

<p>The <code class="language-plaintext highlighter-rouge">-k</code> option now includes descriptions of each check.</p>

<h3 id="named-scope-improvements">Named Scope Improvements</h3>

<p>The 1.2.0 release added checking for SQL injection in named scopes, but it was not very accurate. This has been improved.</p>

<h3 id="better-variable-substitution">Better Variable Substitution</h3>

<p>Variable substitution would sometimes “explode” if a set of code was processed for aliasing several times.</p>

<p>For example,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x = clean(x)

puts x
</code></pre></div></div>

<p>Might become</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x = clean(x)

puts clean(clean(clean(clean(x))))
</code></pre></div></div>

<p>This should now be prevented, so it would just become</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x = clean(x)

puts clean(x)
</code></pre></div></div>

<p>There may be subtle issues with this code (although I have not seen any yet), but it’s better than creating a bunch of useless substitutions.</p>

<h3 id="table-output-for-rescan-reports">Table Output for Rescan Reports</h3>

<p><code class="language-plaintext highlighter-rouge">RescanReport#to_s(true)</code> will now output formatted tables, thanks to <a href="https://github.com/presidentbeef/brakeman/pull/33">Dave Worth</a>.</p>

<h3 id="issues">Issues?</h3>

<p>As usual, please report any issues on <a href="https://github.com/presidentbeef/brakeman/issues">GitHub</a>, send a tweet to <a href="https://twitter.com/brakeman">@Brakeman</a>, or send an email to the <a href="http://librelist.com/browser/brakeman/">mailing list</a>.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2012/01/26/brakeman-1-dot-2-2-released">Brakeman 1.2.2 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2012-01-26 13:58:00 +0000" pubdate  updated >2012-01-26 13:58:00 +0000</time>


</p>
    
  </header>


  <div class="entry-content"><p><em>Changes since 1.2.1:</em></p>

<ul>
  <li>–no-progress works again</li>
  <li>Make CheckLinkTo a separate check</li>
  <li>Don’t fail on unknown options to resource(s)</li>
  <li>Handle empty resource(s) blocks</li>
  <li>Add RescanReport#existing_warnings</li>
</ul>

<h3 id="no-progress-option">No Progress Option</h3>

<p>The last release broke the <code class="language-plaintext highlighter-rouge">--no-progress</code> option for hiding the <code class="language-plaintext highlighter-rouge">1/100 files processed</code> type messages. Now it works again!</p>

<h3 id="separate-check-for-link_to">Separate Check for link_to</h3>

<p>For no great reason, <code class="language-plaintext highlighter-rouge">CheckLinkTo</code> was bundled with <code class="language-plaintext highlighter-rouge">CheckCrossSiteScripting</code>. It has now been moved out to a separate file, allowing it to be treated as a regular check. This means it can be explicitly skipped using <code class="language-plaintext highlighter-rouge">-x CheckLinkTo</code> (if desired).</p>

<h3 id="better-rails-2-route-handling">Better Rails 2 Route Handling</h3>

<p>Brakeman was raising an exception if a hash option to <code class="language-plaintext highlighter-rouge">resource</code> or <code class="language-plaintext highlighter-rouge">resources</code> did not match a set of known options. Now it will only warn instead of aborting route processing.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2012/01/20/brakeman-1-dot-2-1-released">Brakeman 1.2.1 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2012-01-20 12:16:00 +0000" pubdate  updated >2012-01-20 12:16:00 +0000</time>


</p>
    
  </header>


  <div class="entry-content"><p>This is essentially just a bugfix release, but due to the fixes for <code class="language-plaintext highlighter-rouge">link_to</code> warnings, there is a good possibility the number of reported warnings will decrease when upgrading to this version.</p>

<p>Changes since 1.2.0:</p>

<ul>
  <li>Remove link_to warning for Rails 3.x or when using rails_xss</li>
  <li>Don’t warn if first argument to link_to is escaped</li>
  <li>Detect usage of attr_accessible with no arguments</li>
  <li>Fix error when rendering a partial from a view but not through a controller</li>
  <li>Fix some issues with rails_xss, CheckCrossSiteScripting, and CheckTranslateBug</li>
  <li>Simplify Brakeman Rake task</li>
  <li>Avoid modifying $VERBOSE</li>
  <li>Add Brakeman::RescanReport#to_s</li>
  <li>Add Brakeman::Warning#to_s</li>
</ul>

<h3 id="link_to-changes">link_to Changes</h3>

<p>Prior to Rails 3.0, there <a href="https://rails.lighthouseapp.com/projects/8994/tickets/3518-link_to-doesnt-escape-its-input">was a bug</a> in <code class="language-plaintext highlighter-rouge">link_to</code> that caused the body of the link tag to be output without escaping. While this was fixed in Rails 3.0, Brakeman has still been warning on it. This was also fixed in the <a href="https://github.com/rails/rails_xss/commit/afc1610fe4b94150faee98c16f15a24290d20900">rails_xss</a>, so Brakeman should no longer warn on <code class="language-plaintext highlighter-rouge">link_to</code> for Rails 2.x when using the rails_xss plugin.</p>

<p>Brakeman was also warning on <code class="language-plaintext highlighter-rouge">link_to</code> even if the body argument was manually escaped. This should be resolved now.</p>

<p>One other related issue was a silly bug causing Brakeman to sometimes ignore <code class="language-plaintext highlighter-rouge">--escape-html</code> or the rails_xss plugin, leading to some confusing output. This is fixed.</p>

<p>Thanks to <a href="https://github.com/presidentbeef/brakeman/issues/32">Neil Matatall</a> for reporting the <code class="language-plaintext highlighter-rouge">link_to</code> issue and <a href="https://github.com/a5sk4s">Andreas</a> for reporting the rails_xss problems.</p>

<h3 id="attr_accessible-with-no-arguments">attr_accessible with No Arguments</h3>

<p>Brakeman was not detecting the case where <code class="language-plaintext highlighter-rouge">attr_accessible</code> is called with zero arguments, causing spurious mass assignment warnings.</p>

<p>Thanks to <a href="https://github.com/presidentbeef/brakeman/issues/31">Justin Wiley</a> for reporting this.</p>

<h3 id="brakeman-rake-task">Brakeman Rake Task</h3>

<p>The Brakeman Rake task (installed via <code class="language-plaintext highlighter-rouge">--rake</code>) is even <a href="/docs/rake">simpler now</a>.</p>

<h3 id="verbose">$VERBOSE</h3>

<p>Brakeman was using <code class="language-plaintext highlighter-rouge">$VERBOSE</code> and <code class="language-plaintext highlighter-rouge">Kernel.warn</code> for controlling debug output. This has changed and <code class="language-plaintext highlighter-rouge">$VERBOSE</code> will no longer be modified when using Brakeman.</p>

<h3 id="rails-32-support">Rails 3.2 Support</h3>

<p>So far, there have not been any issues with Brakeman and Rails 3.2. Please <a href="https://github.com/presidentbeef/brakeman/issues">report</a> any that come up!</p>

<h3 id="jruby-performance">JRuby Performance</h3>

<p>Prior to Brakeman 1.2, <a href="http://jruby.org/">JRuby</a> was very slow when running Brakeman. This has changed, and now JRuby is probably the fastest option for scanning large applications. Give it a try, especially if you are using Ruby 1.8.7!</p>

<h3 id="mailing-list">Mailing List</h3>

<p>There is now a Brakeman mailing list on <a href="http://librelist.com/browser/brakeman/">librelist</a>.</p>

<p>To subscribe, send any email to <a href="&#109;ailto&#58;b&#114;%&#54;1k&#37;65m&#37;&#54;1n&#64;&#37;6Ci&#98;%&#55;2&#101;l%&#54;&#57;st&#46;com">brakeman@librelist.com</a>. You will be asked to confirm your subscription.</p>

<p>Archives are available for browsing on <a href="http://www.mail-archive.com/brakeman@librelist.com/maillist.html">The Mail Archive</a>.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2012/01/13/brakeman-1-dot-2-released">Brakeman 1.2 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2012-01-13 22:00:00 +0000" pubdate  updated >2012-01-13 22:00:00 +0000</time>


</p>
    
  </header>


  <div class="entry-content"><p>First Brakeman release of 2012!</p>

<p><em>Changes since 1.1:</em></p>

<ul>
  <li>Speed improvements for CheckExecute and CheckRender</li>
  <li>Check <code class="language-plaintext highlighter-rouge">named_scope</code> and <code class="language-plaintext highlighter-rouge">scope</code> for SQL injection</li>
  <li>Add <code class="language-plaintext highlighter-rouge">--rake</code> option to create rake task to run Brakeman</li>
  <li>Add <code class="language-plaintext highlighter-rouge">--summary</code> option to only output summary</li>
  <li>Add experimental support for rescanning a subset of files</li>
  <li>Fix a problem with Rails 3 routes</li>
</ul>

<p>Besides those, there has also been quite a bit of code improvement internally.</p>

<h3 id="speed-improvements">Speed Improvements</h3>

<p>The checks for command injection and dynamic render paths should be considerably faster now.</p>

<h3 id="more-sql-injection-checks">More SQL Injection Checks</h3>

<p>Thanks to <a href="https://github.com/presidentbeef/brakeman/issues/30">a5sk4s</a> for pointing out that Brakeman was not checking <code class="language-plaintext highlighter-rouge">named_scope</code> for SQL injection. This has been rectified. For Rails 3.1 and up, <code class="language-plaintext highlighter-rouge">scope</code> will be checked.</p>

<p>Also, it seems common to use <code class="language-plaintext highlighter-rouge">Model.table_name</code> inside SQL statements. This will no longer raise a warning.</p>

<h3 id="brakeman-rake-task">Brakeman Rake Task</h3>

<p>The <code class="language-plaintext highlighter-rouge">--rake</code> option can now be used to install a Rake task for running Brakeman. The task will be copied to <code class="language-plaintext highlighter-rouge">lib/tasks/brakeman.rake</code>.</p>

<p>To use, run this from the root of the Rails app:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brakeman --rake
</code></pre></div></div>

<p>Then, to run Brakeman:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rake brakeman:run
</code></pre></div></div>

<p>Naturally, this requires Rake to be installed.</p>

<p>To output to a specific file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rake brakeman:run["report.html"]
</code></pre></div></div>

<p>More actions may be added in the future.</p>

<h3 id="summary-option">Summary Option</h3>

<p>Sometimes the specifics of a scan are not needed. The <code class="language-plaintext highlighter-rouge">--summary</code> option will limit the report output to just the summary section.</p>

<h3 id="rescan-for-subset-of-files">Rescan for Subset of Files</h3>

<p>This release adds experimental support for rescanning a subset of paths in a Rails application. Please see this <a href="https://gist.github.com/1563286">example</a>.</p>

<h3 id="issues">Issues</h3>

<p>Please report <em>any</em> problems or questions on <a href="https://github.com/presidentbeef/brakeman/issues">GitHub</a> or send a tweet to <a href="https://twitter.com/#!/brakemanscanner">@Brakeman</a>!</p>
</div>
  
  


  </article>

<nav role="pagination">
  <div>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</nav>

</div>
<aside role=sidebar>
  <section>
  <p></p>
  <p>Brakeman is a free vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="/docs/quickstart">Get started!</a></p>
</section>

  <section>
  <script type='text/javascript'>
    $(document).ready(function(){
      $("#github").GitHubBadge({
        login: "presidentbeef",
        kind: "project",
        repo_name: "brakeman",
        include_github_logo: false,
        image_path: "",
        commit_count: "1",
        issue_count: "0",
        repo_count: "0"
      });
    });
  </script>
  <div id="github"></div>
  <a href="https://dl.circleci.com/status-badge/redirect/gh/presidentbeef/brakeman/tree/main"><img src="https://dl.circleci.com/status-badge/img/gh/presidentbeef/brakeman/tree/main.svg?style=svg" /></a>
</section>

  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2024/02/01/brakeman-6-dot-1-dot-2-released">Brakeman 6.1.2 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/12/04/brakeman-6-dot-1-dot-0-released">Brakeman 6.1.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/07/20/brakeman-6-dot-0-dot-1-released">Brakeman 6.0.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/05/24/brakeman-6-dot-0-released">Brakeman 6.0.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2023/02/21/brakeman-5-dot-4-dot-1-released">Brakeman 5.4.1 Released</a>
      </li>
    
  </ul>
</section>

</aside>

    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
