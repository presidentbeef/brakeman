
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman</title>
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="https://brakemanscanner.org/blog/page/16/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="feed.xml" rel="alternate" title="Brakeman" type="application/atom+xml"/>
  

  

  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@brakeman" />
<meta name="twitter:title" content="Brakeman Security Scanner" />
<meta name="twitter:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
<meta name="twitter:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman</a></h1>
  
    <h2>Ruby on Rails Static Analysis Security Tool</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:https://brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2013/09/18/brakeman-2-dot-1-2-released-important-security-update">Brakeman 2.1.2 Released - Important Security Update</a></h1>
    
    
      <p class="meta">




<time datetime="2013-09-18 01:38:00 -0700" pubdate  updated >2013-09-18 01:38:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p><em>Important</em>: Contrary to the “Brakeman Philosophy,” there is one situation in which Brakeman attempts to load files from an application. This is a security risk since the code in the files would be executed (typical <code class="highlighter-rouge">require</code> behavior). Note that this is only a real problem if running Brakeman against code outside one’s control. Since most users are scanning their own code, this should not be a concern for the majority of Brakeman users.</p>

<p><em>Changes since 2.1.1:</em></p>

<ul>
  <li>Do not attempt to load custom Haml filters</li>
  <li>Do not warn about <code class="highlighter-rouge">to_json</code> XSS in Rails 4</li>
  <li>Remove fuzzy matching on dangerous <code class="highlighter-rouge">attr_accessible</code> values</li>
  <li>Add –table-width option to set width of text reports (<a href="https://github.com/ssendev">ssendev</a>)</li>
</ul>

<h3 id="custom-haml-filters">Custom Haml Filters</h3>

<p>Brakeman no longer attempts to load custom Haml filters. This was a hack (from nearly three years ago) to help compile some Haml templates. It was recently noted that this introduces a security risk when scanning untrusted code.</p>

<p>For now, custom Haml filters will cause a Brakeman error and the Haml templates using them will not be scanned.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/commit/8a6ae98df3039bf5f3d7cc0852efb1006362f143#L1L3">changes</a>)</p>

<h3 id="json-output-in-rails-4">JSON Output in Rails 4</h3>

<p>As of Rails 4, the output of <code class="highlighter-rouge">to_json</code> is now safe by default. Brakeman should no longer warn about cross-site scripting with <code class="highlighter-rouge">to_json</code> in Rails 4 applications.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/392">changes</a>)</p>

<h3 id="less-fuzzy-mass-assignment">Less Fuzzy Mass Assignment</h3>

<p>Brakeman no longer uses fuzzy matching for potentially dangerous model attributes allowed for mass assignment, such as any value containing <code class="highlighter-rouge">admin</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/390">changes</a>)</p>

<h3 id="text-report-width-option">Text Report Width Option</h3>

<p>The width of text reports can now be controlled with the <code class="highlighter-rouge">--table-width</code> option. For example, this can be useful when capturing text output to a file.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/387">changes</a>)</p>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2013/08/21/brakeman-2-dot-1-1-released">Brakeman 2.1.1 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2013-08-21 12:00:00 -0700" pubdate  updated >2013-08-21 12:00:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>This is a small bug fix release. The only expected changes in warnings are for dangerous attributes in <code class="highlighter-rouge">attr_accessible</code>
and cross site scripting involving model attributes. Some warning fingerprints may change as a result of this update.</p>

<p><em>Changes since 2.1.0</em>:</p>

<ul>
  <li>More accurate results for model attribute warnings (<a href="https://github.com/presidentbeef/brakeman/issues/385">#385</a>)</li>
  <li>Do not warn on <code class="highlighter-rouge">attr_accessible</code> using roles (<a href="https://github.com/presidentbeef/brakeman/issues/372">#372</a>)</li>
  <li>New warning code for dangerous attributes in <code class="highlighter-rouge">attr_accessible</code></li>
  <li>Fix infinite loop when run as rake task (<a href="https://github.com/arkadyan">Matthew Shanley</a>)</li>
  <li>Use exit code zero with <code class="highlighter-rouge">-z</code> if all warnings ignored (<a href="https://github.com/presidentbeef/brakeman/issues/381">#381</a>)</li>
  <li>Respect ignored warnings in rescans (<a href="https://github.com/presidentbeef/brakeman/issues/382">#382</a>)</li>
  <li>Respect ignored warnings in tabs format reports</li>
  <li>Ignore dynamic controller names in routes</li>
</ul>

<h3 id="more-accurate-model-matching">More Accurate Model Matching</h3>

<p>Model attributes which are reported as user input should now be reported more accurately. For example, instead of reporting <code class="highlighter-rouge">Model.find(1)</code> as user input, the entire attribute will be reported. For example: <code class="highlighter-rouge">Model.find(1).name</code></p>

<p>As a side effect, several methods which were already intended to be ignored (such as <code class="highlighter-rouge">count</code>) will actually be ignored for XSS warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/386">changes</a>)</p>

<h3 id="attr_accessible-check-updates">attr_accessible Check Updates</h3>

<p>The check for potentially dangerous attributes whitelisted in <code class="highlighter-rouge">attr_accessible</code> has been updated to ignore attributes protected by roles. Additionally, it now has its own warning code to separate it from regular mass assignment warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/388">warning code change</a>, <a href="https://github.com/presidentbeef/brakeman/pull/384">role change</a>)</p>

<h3 id="rake-task-fix">Rake Task Fix</h3>

<p>The last release included a method named <code class="highlighter-rouge">load_dependency</code> which handles calling <code class="highlighter-rouge">require</code> for optional dependencies. Unfortunately, Rails overrides <code class="highlighter-rouge">require</code> to call its own method called <code class="highlighter-rouge">load_dependency</code>. Rails is loaded when any <code class="highlighter-rouge">rake</code> command is used, so when Brakeman is run with Rake it causes an infinite loop between <code class="highlighter-rouge">load_dependency</code> and <code class="highlighter-rouge">require</code>.</p>

<p>Thanks to <a href="https://github.com/arkadyan">Matthew Shanley</a> for reporting the issue and providing a fix.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/375">changes</a>)</p>

<h3 id="exit-code-fixed-when-warnings-ignored">Exit Code Fixed When Warnings Ignored</h3>

<p>Brakeman will now return <code class="highlighter-rouge">0</code> when using <code class="highlighter-rouge">-z</code> and all reported warnings are ignored.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/375">changes</a>)</p>

<h3 id="ignore-warnings-in-rescans">Ignore Warnings in Rescans</h3>

<p>Ignored warnings should now be ignored during rescans (for use with <a href="https://github.com/guard/guard-brakeman">guard-brakeman</a>).</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/383">changes</a>)</p>

<h3 id="remove-ignored-warnings-in-tabs-report">Remove Ignored Warnings in Tabs Report</h3>

<p>Ignoring warnings should now work for those using the Jenkins plugin.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/374">changes</a>)</p>

<h3 id="ignore-dynamic-controller-name-in-routes">Ignore Dynamic Controller Name in Routes</h3>

<p>Instead of completely aborting route processing, dynamic controller names are just ignored.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/379">changes</a>)</p>

<h3 id="report-issues">Report Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2013/07/17/brakeman-2-dot-1-0-released">Brakeman 2.1.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2013-07-17 16:36:00 -0700" pubdate  updated >2013-07-17 16:36:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>Brakeman recently passed 250,000 downloads on <a href="http://rubygems.org/gems/brakeman">RubyGems.org</a>! Thanks to everyone who has contributed!</p>

<p>With this release, the most requested and most controversional feature has been added: it is now possible to ignore warnings based on a configuration file.</p>

<p>Also, the brakeman-min gem has been updated to provide a minimal-dependency version of Brakeman.</p>

<p><em>Changes since 2.0.0</em>:</p>

<ul>
  <li>Add support for ignoring warnings</li>
  <li>Add brakeman-min gem</li>
  <li>Add check for dangerous model attributes defined in <code class="highlighter-rouge">attr_accessible</code> (<a href="https://github.com/themetric">Paul Deardorff</a>)</li>
  <li>Add check for <code class="highlighter-rouge">authenticate_or_request_with_http_basic</code> (<a href="https://github.com/presidentbeef/brakeman/issues/301">#301</a>)</li>
  <li>Add <code class="highlighter-rouge">--branch-limit</code> option, limit to 5 by default</li>
  <li>Add more methods to check for command injection (<a href="https://github.com/presidentbeef/brakeman/issues/206">#206</a>)</li>
  <li>Allow use of Slim 2.x (<a href="https://github.com/iwz">Ian Zabel</a>)</li>
  <li>Load gem dependencies on-demand</li>
  <li>Output JSON diff to file if <code class="highlighter-rouge">-o</code> option is used</li>
  <li>Refactor of SQL injection check code (<a href="https://github.com/barttenbrinke">Bart ten Brinke</a>)</li>
  <li>Return error exit code when application path is not found</li>
  <li>Fix detection of duplicate XSS warnings</li>
  <li>Fix output format detection to be more strict again</li>
  <li>Fix Gemfile.lock parsing for non-native line endings (<a href="https://github.com/presidentbeef/brakeman/issues/359">#359</a>)</li>
  <li>Allow empty Brakeman configuration file (<a href="https://github.com/presidentbeef/brakeman/issues/343">#343</a>)</li>
  <li>Update to ruby_parser 3.2.2</li>
</ul>

<h3 id="ignoring-warnings">Ignoring Warnings</h3>

<p>It should be stressed that warnings should only be ignored when it is absolutely certain they are false positives <em>and</em> the false positive cannot be fixed on Brakeman’s side. If there is uncertainty, please <a href="https://github.com/presidentbeef/brakeman/issues/new">open an issue</a> so we have the opportunity to improve Brakeman.</p>

<p>The ignore configuration is a JSON file containing a list of warnings and some metadata. Right now the metadata is not actually used, but it might be useful in the future. The only warning information which is actually used is the fingerprint.</p>

<p>By default Brakeman will look for a <code class="highlighter-rouge">brakeman.ignore</code> file in the <code class="highlighter-rouge">config</code> directory of the application. This can be changed with the <code class="highlighter-rouge">-i</code> option.</p>

<p>Since creating and managing the file by hand would be a pain, the <code class="highlighter-rouge">-I</code> provides interactive management of the ignore configuration.</p>

<p><img src="/images/bm-I.png" alt="brakeman -I" /></p>

<p>JSON reports now include an array of <code class="highlighter-rouge">ignored_warnings</code>, HTML reports have a table of ignored warnings which is hidden by default, and the basic text output will include the number of warnings ignored, if any.</p>

<p>Again, please use this power responsibly.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/368">changes</a>)</p>

<h3 id="brakeman-min-gem-updated">brakeman-min Gem Updated</h3>

<p>You may have noticed the ancient (0.5.2) version of brakeman-min hanging around and hopefully you ignored it.</p>

<p>In order to work “out of the box”, Brakeman includes dependencies on HAML, Slim, and Erubis, and depends on several gems for different report types. The brakeman-min gem strips out all optional dependencies, which reduces the gems required from 13 to just 4. This allows you to just install the gems you actually need.</p>

<p>Since the minimal version also removes terminal-table and HighLine, the default output for brakeman-min is JSON. Install those two gems to get the familiar text table report.</p>

<p>The version for brakeman-min will match the regular gem and there are no changes in functionality between the gems.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/367">changes</a>)</p>

<h3 id="mass-assignment-to-dangerous-attributes">Mass Assignment to Dangerous Attributes</h3>

<p>Paul Deardorff has added a new check which warns on model attributes included in <code class="highlighter-rouge">attr_accessible</code> which perhaps should not have been.</p>

<h3 id="more-basic-auth-warnings">More Basic Auth Warnings</h3>

<p>Brakeman will now warn on use of password strings used directly in <code class="highlighter-rouge">authenticate_or_request_with_http_basic</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/362">changes</a>)</p>

<h3 id="branch-limiting">Branch Limiting</h3>

<p>When dealing with conditional branches, Brakeman generates basically “union” values of possible values for a given variable. (See one of the many other issues dealing with this for more info, like <a href="https://github.com/presidentbeef/brakeman/pull/297">#297</a>).</p>

<p>In some situations (lots of assignments to the same variable inside different branches), however, these values can grow to be unreasonably large. In most <em>useful</em> cases, the values aren’t that large.</p>

<p>This change introduces a limit on these union values. The default is <code class="highlighter-rouge">5</code>, which means a given variable should only have five alternative values. If a sixth alternative is encountered (i.e. assignment inside another branch), the old values get kicked out, the new value is saved and the process starts over. This seems like a decent compromise between being flow insensitive (like <code class="highlighter-rouge">--no-branching</code>) and the current state of affairs (track everything, causing massive slowdowns and memory usage).</p>

<p>To turn off the limiting, use <code class="highlighter-rouge">--branch-limit -1</code>.</p>

<p><code class="highlighter-rouge">--branch-limit 0</code> is almost like <code class="highlighter-rouge">--no-branching</code> except slower because it’s still trying to track stuff.</p>

<p>In testing, a value of <code class="highlighter-rouge">5</code> did not show any difference in detected vulnerabilities, although it is entirely possible (though empirical evidence points towards unlikely) that some vulnerabilities would be hidden because of this.</p>

<p>(Description copied from the <a href="https://github.com/presidentbeef/brakeman/pull/345">pull request</a>.)</p>

<h3 id="more-command-injection-methods">More Command Injection Methods</h3>

<p>Several more Ruby methods for launching processes have been added to the command injection check, including a bunch from <a href="http://rdoc.info/stdlib/open3/Open3">Open3</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/348">changes</a>)</p>

<h3 id="support-for-slim-2x">Support for Slim 2.x</h3>

<p>No real changes here, but the gem has been updated to allow Slim 2.x.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/353">changes</a>)</p>

<h3 id="gems-loaded-on-demand">Gems Loaded On-Demand</h3>

<p>Gem dependencies which Brakeman does not need for its core functionality are now loaded as-needed instead of everything being loaded at start time. Besides maybe wasting less time and memory, this enabled the brakeman-min gem discussed above.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/367">changes</a>)</p>

<h3 id="output-json-compare-to-file">Output JSON Compare to File</h3>

<p>The <code class="highlighter-rouge">-o</code> option can now be used with <code class="highlighter-rouge">--compare</code> to output the JSON diff to a file.</p>

<p>If multiple <code class="highlighter-rouge">-o</code> options are given, the first one will be used for the JSON diff, and the other <code class="highlighter-rouge">-o</code> files will be used to output a regular report.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/363">changes</a>)</p>

<h3 id="error-exit-code-when-application-not-found">Error Exit Code When Application Not Found</h3>

<p>The last version of Brakeman had a bug where the program would exit with return code <code class="highlighter-rouge">0</code> when no Rails application was found. It will now return <code class="highlighter-rouge">1</code> like it did before.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/350">changes</a>)</p>

<h3 id="fewer-cross-site-scripting-duplicates">Fewer Cross Site Scripting Duplicates</h3>

<p>Some cross site scripting warnings were being reported with both high and low confidence. This has been fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/355">changes</a>)</p>

<h3 id="stricter-report-format-detection">Stricter Report Format Detection</h3>

<p>For a while, Brakeman would match <code class="highlighter-rouge">-o</code> file names like <code class="highlighter-rouge">blah.jsonness</code> and assume you wanted JSON output. This is fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/346">changes</a>)</p>

<h3 id="parse-gemfilelock-with-non-native-line-endings">Parse Gemfile.lock with Non-Native Line Endings</h3>

<p>Thanks to Paul Deardorff for updating Gemfile.lock parsing for files created on a different operating system.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/370">changes</a></p>

<h3 id="allow-empty-brakeman-config-file">Allow Empty Brakeman Config File</h3>

<p>Sure, why not?</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/344">changes</a>)</p>

<h3 id="rubyparser-update">RubyParser Update</h3>

<p>Brakeman now uses the latest ruby_parser, which has support for Ruby 2.0 syntax and a lot of bug fixes. You may also notice some line numbers in warnings will be more accurate.</p>

<h3 id="report-issues">Report Issues</h3>

<p>This was a big release, so please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a>! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>

</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2013/05/20/brakeman-2-dot-0-0-released">Brakeman 2.0.0 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2013-05-20 10:09:00 -0700" pubdate  updated >2013-05-20 10:09:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>Brakeman 2.0 is here! While it does include a lot of updates, the “2.0” is mostly to indicate this release includes some changes which may break external tools (also, who wants a version “1.10”?). Tool maintainers are encouraged to avoid dependencies on warning messages and types (use the “warning code” instead), and to use warning fingerprints + line numbers for comparing warnings.</p>

<p>Lots more features are on the horizon for the 2.x family!</p>

<p><em>Changes since 1.9.5</em>:</p>

<ul>
  <li>Remove “timestamp” key from JSON reports</li>
  <li>Relative paths are used by default in JSON reports</li>
  <li><code class="highlighter-rouge">--absolute-paths</code> replaces <code class="highlighter-rouge">--relative-paths</code></li>
  <li>Fix fingerprint generation to actually use the file path</li>
  <li>Clean up SQL CVE warning messages</li>
  <li>Remove deprecated config file locations</li>
  <li>Add <code class="highlighter-rouge">--only-files</code> option to specify files/paths to scan (<a href="https://github.com/ehlertij">Ian Ehlert</a>)</li>
  <li>Add Marshal/CSV deserialization check</li>
  <li>Combine Marshal/YAML/CSV deserialization checks into single check</li>
  <li>Avoid duplicate “Dangerous Send” and “Unsafe Reflection” warnings</li>
  <li>Avoid duplicate results for Symbol DoS check</li>
  <li>Medium confidence for mass assignment to <code class="highlighter-rouge">attr_protected</code> models</li>
  <li>Only treat classes with names containing <code class="highlighter-rouge">Controller</code> like controllers</li>
  <li>Better handling of classes nested inside controllers</li>
  <li>Better handling of controller classes nested in classes/modules</li>
  <li>Handle <code class="highlighter-rouge">-&gt;</code> lambdas with no arguments (<a href="https://github.com/presidentbeef/brakeman/issues/331">#331</a>)</li>
  <li>Handle explicit block argument destructuring</li>
  <li>Skip Rails config options that are real objects (<a href="https://github.com/presidentbeef/brakeman/issues/324">#324</a>)</li>
  <li>Detect Rails 3 JSON escape config option</li>
  <li>Much better tracking of warning file names</li>
  <li>Fix errors when using <code class="highlighter-rouge">--separate-models</code> (<a href="https://github.com/noahd1">Noah Davis</a>)</li>
  <li>Fix text report console output in JRuby (<a href="https://github.com/presidentbeef/brakeman/issues/229">#229</a>)</li>
  <li>Fix false positives on <code class="highlighter-rouge">Model#id</code></li>
  <li>Fix false positives on <code class="highlighter-rouge">params.to_json</code></li>
  <li>Fix model path guesses to use “models/” instead of “controllers/”</li>
  <li>Use exceptions instead of abort in brakeman lib (<a href="https://github.com/presidentbeef/brakeman/issues/230">#230</a>)</li>
  <li>Update to Ruby2Ruby 2.0.5</li>
</ul>

<h3 id="json-report-changes">JSON Report Changes</h3>

<p>Several changes were made to JSON reports in this release. The <code class="highlighter-rouge">["scan_info"]["timestamp"]</code> key was removed, since it was just a duplicate of <code class="highlighter-rouge">["scan_info"]["end_time"]</code>.</p>

<p>JSON reports now default to reporting relative paths for file names in warnings, which seems to be more useful for external tools. Because of this change, the <code class="highlighter-rouge">--relative-paths</code> option has been removed and replaced with <code class="highlighter-rouge">--absolute-paths</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/333">timestamp change</a>, <a href="https://github.com/presidentbeef/brakeman/pull/330">relative paths change</a>)</p>

<h3 id="fingerprint-generation">Fingerprint Generation</h3>

<p>The previous release had a bug where fingerprints were not really including the file name as part of the fingerprint. This has been resolved, and fingerprints should be a reliable way of tracking warnings now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/317">changes</a>)</p>

<h3 id="warning-messages">Warning Messages</h3>

<p>The warning messages for SQL CVEs were unnecessarily verbose, so they have been trimmed down. Of course, this shouldn’t affect anyone, because all apps have upgraded to Rails versions without reported vulnerabilities, right?</p>

<p>Some small changes have been made to other warning messages. Please do not rely on warning messages remaining constant. To track warnings, use the <code class="highlighter-rouge">warning_code</code> attribute which will never change.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/334">changes</a>)</p>

<h3 id="config-file-default-locations">Config File Default Locations</h3>

<p>The following locations will no longer be automatically searched for Brakeman configuration files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* `./config.yaml`
* `.brakeman/config.yaml`
* `/etc/brakeman/config.yaml`
* The Brakeman `lib/` directory
</code></pre></div></div>

<p>The following locations are still used:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* `./config/brakeman.yml`
* `~/.brakeman/config.yml`
* `/etc/brakeman/config.yml`
</code></pre></div></div>

<p>Yes, Brakeman can use configuration files. See <code class="highlighter-rouge">brakeman --help</code> for details.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/310">changes</a>)</p>

<h3 id="limiting-scans">Limiting Scans</h3>

<p>While individual files can be exempted from a scan using <code class="highlighter-rouge">--skip-files</code>, the new <code class="highlighter-rouge">--only-files</code> option can limit scans to a set of files and directories, thanks to <a href="https://github.com/ehlertij">Ian Ehlert</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/316">changes</a>)</p>

<h3 id="deserialization-checks">Deserialization Checks</h3>

<p>Brakeman now checks for deserialization of user input using <code class="highlighter-rouge">Marshal</code>, <code class="highlighter-rouge">YAML</code>, and <code class="highlighter-rouge">CSV</code>. The former <code class="highlighter-rouge">YAMLLoad</code> check has been merged into the new <code class="highlighter-rouge">CheckDeserialize</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/329">changes</a>)</p>

<h3 id="fewer-duplicate-warnings">Fewer Duplicate Warnings</h3>

<p>A few new checks (symbol DoS, dangerous sends, and unsafe reflection) were generating a lot of duplicate warnings. This has been fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/338">changes</a>)</p>

<h3 id="nested-classes-and-controllers">Nested Classes and Controllers</h3>

<p>Brakeman’s previous approach to nested classes was to ignore them. But it appears some people use classes as namespaces and place important classes (like controllers) inside them. This release changes how Brakeman deals with nested classes, as well as classes that inherit from <code class="highlighter-rouge">ApplicationController</code> but do not have <code class="highlighter-rouge">Controller</code> in their name. Please see the <a href="https://github.com/presidentbeef/brakeman/pull/325">pull request</a> for details.</p>

<p>Hopefully this means more accurate scans, but please report any correct warnings from earlier versions missing in 2.0.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/325">changes</a>)</p>

<h3 id="stabby-lambdas-with-no-arguments">“Stabby” Lambdas with No Arguments</h3>

<p>Errors like <code class="highlighter-rouge">undefined method 'each' for 0:Fixnum</code> caused by use of <code class="highlighter-rouge">-&gt;</code> lambdas with zero arguments should be fixed now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/332">changes</a>)</p>

<h3 id="explicit-block-argument-destructuring">Explicit Block Argument Destructuring</h3>

<p>Explicit block argument destructuring like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>blah do |x, (y,z)|
end
</code></pre></div></div>

<p>used to be ignored, but now the arguments are handled in order to keep block arguments in their proper scope.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/307/">changes</a>)</p>

<h3 id="rails-3-config-processing">Rails 3 Config Processing</h3>

<p>Brakeman only cares about Rails configuration processing to check for specific settings. It converts a setting like <code class="highlighter-rouge">config.a.b.z</code> to a hash entry like <code class="highlighter-rouge">[:config][:a][:b][:z]</code>. However, if real values are found for <code class="highlighter-rouge">config.a.b</code> this messes things up. So for now they are ignored.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/326">changes</a>)</p>

<h3 id="errors-from-separating-models">Errors from Separating Models</h3>

<p><a href="https://github.com/noahd1">Noah Davis</a> fixed an error where file names were not being properly set when using the <code class="highlighter-rouge">--separate-models</code> option.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/313">changes</a>)</p>

<h3 id="better-file-tracking">Better File Tracking</h3>

<p>Files associated with warnings should be more accurate now, as file information is better preserved during processing.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/318">changes</a>)</p>

<h3 id="jruby-console-output">JRuby Console Output</h3>

<p>The default text output to a console should now be working again in JRuby. Thanks to <a href="https://github.com/jeg2">JEG2</a> for pushing out a new version of <a href="http://highline.rubyforge.org/">HighLine</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/339">changes</a>)</p>

<h3 id="modelid-and-to_json-false-positives">Model#id and to_json False Positives</h3>

<p>There should be fewer warnings generated by <code class="highlighter-rouge">Model#id</code> and <code class="highlighter-rouge">to_json</code> calls on <code class="highlighter-rouge">params</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/309">changes</a>)</p>

<h3 id="exceptions-instead-of-abort">Exceptions instead of Abort</h3>

<p>A few instances of <code class="highlighter-rouge">abort</code> have been removed from Brakeman and replaced with exceptions. This should make it easier to use Brakeman as a library.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/335">changes</a>)</p>

<h3 id="report-issues">Report Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>

</div>
  
  


  </article>


  <article>
    
  <header>
    <div class="articlelogo">&nbsp;</div>
    
    <h1 class="entry-title"><a href="/blog/2013/04/05/brakeman-1-dot-9-5-released">Brakeman 1.9.5 Released</a></h1>
    
    
      <p class="meta">




<time datetime="2013-04-05 08:42:00 -0700" pubdate  updated >2013-04-05 08:42:00 -0700</time>


</p>
    
  </header>


  <div class="entry-content"><p>As planned, Brakeman 1.9.5 is mostly internal bug fixes and improvements, with the one exception being a new check for symbol creation from user input. Barring any emergencies, the next release will be 2.0.</p>

<p><em>Changes since 1.9.4</em>:</p>

<ul>
  <li>Add check for unsafe symbol creation (<a href="https://github.com/HonoreDB">Aaron Weiner</a>)</li>
  <li>Do not warn on mass assignment with <code class="highlighter-rouge">slice</code>/<code class="highlighter-rouge">only</code> (<a href="https://github.com/presidentbeef/brakeman/issues/203">#203</a>)</li>
  <li>Do not warn on session secret if in <code class="highlighter-rouge">.gitignore</code> (<a href="https://github.com/presidentbeef/brakeman/issues/241">#241</a>)</li>
  <li>Fix session secret check for Rails 4</li>
  <li>Fix scoping for blocks and block arguments</li>
  <li>Fix error when modifying blocks in templates</li>
  <li>Fix crash on <code class="highlighter-rouge">before_filter</code> outside controller</li>
  <li>Fix <code class="highlighter-rouge">Sexp</code> hash cache invalidation</li>
  <li>Respect <code class="highlighter-rouge">quiet</code> option in configuration file (<a href="https://github.com/presidentbeef/brakeman/issues/300">#300</a>)</li>
  <li>Convert assignment to simple <code class="highlighter-rouge">if</code> expressions to <code class="highlighter-rouge">or</code></li>
  <li>More fixes for assignments inside branches</li>
  <li>Refactoring of <code class="highlighter-rouge">CheckLinkTo</code> and <code class="highlighter-rouge">Report</code> (<a href="https://github.com/barttenbrinke">Bart ten Brinke</a>)</li>
  <li>Pin ruby2ruby dependency to version 2.0.3 (<a href="https://github.com/seattlerb/ruby2ruby/issues/15">see here</a>)</li>
</ul>

<h3 id="symbol-creation-check">Symbol Creation Check</h3>

<p><a href="https://github.com/HonoreDB">Aaron Weiner</a> added a check for symbol creation from user input, such as <code class="highlighter-rouge">params[:x].to_i</code> which can lead to Denial of Service.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/296">changes</a>)</p>

<h3 id="mass-assignment-with-select-keys">Mass Assignment with Select Keys</h3>

<p>A common pattern to avoid mass assignment issues is to use <code class="highlighter-rouge">slice</code> or <code class="highlighter-rouge">only</code> when passing in values to mass assignment methods. Brakeman should no longer warn in these situations.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/303">changes</a>)</p>

<h3 id="ignoring-session-secrets">Ignoring Session Secrets</h3>

<p>Brakeman no longer warns if the config file containing the session secret key is included in <code class="highlighter-rouge">.gitignore</code>. This only applies if the default file names are used.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/302">changes</a>)</p>

<h3 id="warn-on-rails-4-session-secrets">Warn on Rails 4 Session Secrets</h3>

<p>Support for Rails 4 session secrets has been added, since the configuration for that changed again.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/302">changes</a>)</p>

<h3 id="block-scoping">Block Scoping</h3>

<p>Correct scope for blocks is tricky, and there are also some differences between Ruby 1.8 and 1.9 for block arguments. For the most part, Brakeman has ignored blocks, but this lead to some compounding issues with assignments in branches.</p>

<p>This release now treats all block arguments as local assignments <em>inside</em> the block and shadows any variables outside the block (this is Ruby 1.9 behavior). This should lead to some performance improvements where block arguments do shadow outer variables.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/305">changes and examples</a>)</p>

<h3 id="sexp-hash-cache-invalidation">Sexp Hash Cache Invalidation</h3>

<p>Since Brakeman does a ton of hash table lookups with s-expressions as keys, it caches <code class="highlighter-rouge">Sexp#hash</code> values. In some situations, these cached values were being invalidated when they did not need to be, and not being invalidated when they should have been.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/294">changes</a>)</p>

<h3 id="quiet-option">Quiet Option</h3>

<p>Brakeman will now be quiet if the option is set in a configuration file.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/306">changes</a>)</p>

<h3 id="assignments-of-if-expressions">Assignments of If Expressions</h3>

<p>Simple if expression assigments such as <code class="highlighter-rouge">x = thing ? this : that</code> will now be converted to <code class="highlighter-rouge">x = this || that</code>. This should simplify some code reported with warnings as well as avoid warning on values in <code class="highlighter-rouge">if</code> conditions.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/295">changes and examples</a>)</p>

<h3 id="assignments-in-if-expressions">Assignments in If Expressions</h3>

<p>Assignments inside <code class="highlighter-rouge">if</code> branches cause Brakeman to “branch” the values for a variable, since it could be two or more different values. However, this branching should only occur <em>after</em> both branches have been processed. Brakeman 1.9.3 made it so values were not branched inside of a single branch, but there was still an issue where values branched in the <code class="highlighter-rouge">then</code> clause would be used in the <code class="highlighter-rouge">else</code> clause. This release fixes that issue and simplifies branching overall.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/297">changes and examples</a>)</p>

<h3 id="refactoring-internals">Refactoring Internals</h3>

<p><a href="https://github.com/barttenbrinke">Bart ten Brinke</a> has begun some work refactoring some of the many ugly parts of Brakeman. Thanks!</p>

<h3 id="report-issues">Report Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider joining the <a href="http://brakemanscanner.org/contact/">mailing list</a> or following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter.</p>

<h3 id="roadmap">Roadmap</h3>

<p>Next up should be <a href="https://github.com/presidentbeef/brakeman/wiki/Roadmap">Brakeman 2.0</a> unless there needs to be another emergency release. Most of the changes for 2.0 are relatively minor, but break backwards compatibility in areas that may affect external tools. This includes cleaning up warning messages, removing duplicate information from JSON output, combining some checks, changing some defaults, and so on.</p>

<p>If you have suggestions for other breaking changes, please file an issue ASAP to get it into the next release!</p>
</div>
  
  


  </article>

<nav role="pagination">
  <div>
    <a href="/blog/archives">Blog Archives</a>
  </div>
</nav>

</div>
<aside role=sidebar>
  <section>
  <p></p>
  <p>Brakeman is a free vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="/docs/quickstart">Get started!</a></p>
</section>

  <section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="https://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>

  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2022/08/09/brakeman-5-dot-3-dot-0-released">Brakeman 5.3.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/01/brakeman-5-dot-2-dot-3-released">Brakeman 5.2.3 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/04/06/brakeman-5-dot-2-dot-2-released">Brakeman 5.2.2 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/01/30/5-dot-2-dot-1-released">Brakeman 5.2.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/12/15/brakeman-5-dot-2-dot-0-released">Brakeman 5.2.0 Released</a>
      </li>
    
  </ul>
</section>

  <section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <a class="twitter-timeline" data-dnt=true href="https://twitter.com/brakeman" data-widget-id="258654953097273345">Tweets by @brakeman</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
</section>

</aside>

    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
