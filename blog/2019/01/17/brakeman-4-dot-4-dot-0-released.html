
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Brakeman: Brakeman 4.4.0 Released</title>
    <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="/stylesheets/screen.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <meta name="og:title" content="Brakeman - Brakeman 4.4.0 Released" />
    <meta name="og:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
    <meta name="og:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />
</head>
<body class="blog">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="/" class="logo">
                    <img src="/images/brakeman_logo_small.png" alt="Brakeman Logo">
                    Brakeman
                </a>
                <ul class="nav-links"><li>
                            <a href="/docs/">
                                Documentation
                            </a>
                        </li><li>
                            <a href="/blog/archives">
                                News
                            </a>
                        </li><li>
                            <a href="https://github.com/presidentbeef/brakeman">
                                Code
                            </a>
                        </li></ul>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="blog-container">
    <div class="container">
        <div class="blog-layout">
            <!-- Sidebar -->
            <aside class="blog-sidebar fade-in stagger-1">
                <div class="sidebar-card">
                    <h4>Recent Posts</h4>
                    
                        <a href="/blog/2025/07/18/brakeman-7-dot-1-dot-0-released">Brakeman 7.1.0 Released</a>
                    
                        <a href="/blog/2025/04/04/brakeman-7-dot-0-dot-2-released">Brakeman 7.0.2 Released</a>
                    
                        <a href="/blog/2025/04/03/brakeman-7-dot-0-dot-1-released">Brakeman 7.0.1 Released</a>
                    
                        <a href="/blog/2024/12/30/brakeman-7-dot-0-dot-0-released">Brakeman 7.0.0 Released</a>
                    
                </div>

                <div class="sidebar-card">
                    <h4>Quick Links</h4>
                    <a href="/docs/quickstart/">Quick Start</a>
                    <a href="/docs/">Documentation</a>
                    <a href="https://github.com/presidentbeef/brakeman/issues">Report Issues</a>
                    <a href="https://github.com/presidentbeef/brakeman">GitHub Repository</a>
                </div>
            </aside>

            <!-- Main Article -->
            <div class="article-container">
                <!-- Mobile Sidebar Toggle -->
                <div class="sidebar-toggle">
                    <span>Quick Navigation</span>
                    <span class="toggle-icon">▼</span>
                </div>

                <article class="article-main fade-in">
                    <div class="article-header">
                        <div class="article-meta">
                            <span class="date-badge">January 17, 2019</span>
                        </div>
                        <h1 class="article-title">Brakeman 4.4.0 Released</h1>
                        
                    </div>

                    <div class="article-content">
                        
                            <div class="changelog-intro">
                                <h3>Changes since 4.3.1:</h3>
                                <ul>
                                    
                                        <li>Add check for CVE-2018-3760
</li>
                                    
                                        <li>Add <code class="language-plaintext highlighter-rouge">--enable</code> option to enable optional checks
</li>
                                    
                                        <li>Add Dockerfile to run Brakeman inside Docker (<a href="https://github.com/ryankemper">Ryan Kemper</a>)
</li>
                                    
                                        <li>Handle empty <code class="language-plaintext highlighter-rouge">secrets.yml</code> files (<a href="https://github.com/naokikimura">Naoki Kimura</a>)
</li>
                                    
                                        <li>Ignore Tempfiles in FileAccess warnings (<a href="https://github.com/cmkoller">Christina Koller</a>)
</li>
                                    
                                        <li>Avoid warning about command injection when <code class="language-plaintext highlighter-rouge">String#shellescape</code> and <code class="language-plaintext highlighter-rouge">Shellwords.shelljoin</code> are used (<a href="https://github.com/oggy">George Ogata</a>)
</li>
                                    
                                        <li>Treat <code class="language-plaintext highlighter-rouge">if not</code> like <code class="language-plaintext highlighter-rouge">unless</code> (<a href="https://github.com/presidentbeef/brakeman/issues/1225">#1225</a>)
</li>
                                    
                                        <li>Fix Rails 4 configuration handling
</li>
                                    
                                        <li>Set default encoding to UTF-8
</li>
                                    
                                        <li>Support reading gem versions from gemspecs
</li>
                                    
                                        <li>Support gem versions which are just major.minor (e.g. 3.0)
</li>
                                    
                                        <li>Correctly set <code class="language-plaintext highlighter-rouge">rel="noreferrer"</code> in HTML reports
</li>
                                    
                                        <li>Fix thread-safety issue in CallIndex
</li>
                                    
                                        <li>Fix trim mode for ERb templates in old Rails versions
</li>
                                    
                                        <li>Avoid <code class="language-plaintext highlighter-rouge">nil</code> errors when concatenating arrays
</li>
                                    
                                        <li>Add rendered template information to render paths
</li>
                                    
                                        <li>Trim some unnecessary files from bundled gems
</li>
                                    
                                        <li>Deadcode and typo fixes found via Coverity
</li>
                                    
                                        <li>Complete overhaul of warning message construction
</li>
                                    
                                        <li>Update to Slim 4.0.1 (<a href="https://github.com/Jakenberg">Jake Peterson</a>)
</li>
                                    
                                        <li>Update to RubyParser 3.12.0
</li>
                                    
                                        <li>Updated license
</li>
                                    
                                </ul>
                            </div>
                        


			<div class="feature-section">
			    <p>Happy new year and apologies for the delay in releases! Brakeman should now return to the normal 1-2 month release cycle. There are already pull requests lined up for the next release.</p>

<p>This release includes a number of fixes and new features. In particular, please note there are large changes to how reports and warning messages are generated. Please report any issues!</p>

<p>Also, the <code class="language-plaintext highlighter-rouge">brakeman</code> gem version of this release no longer supports use of Slim with Ruby 1.9.3. See below for details.</p>

<p>As noted previously, due to the <a href="https://brakemanscanner.org/blog/2018/06/28/brakeman-has-been-acquired-by-synopsys/index.html">Synopsys acquisition</a> Brakeman is now distributed under a non-OSS license. See below for details.</p>

<h2 id="cve-2018-3760">CVE-2018-3760</h2>

<p>A new check was added for <a href="https://groups.google.com/d/msg/rubyonrails-security/ft_J--l55fM/7roDfQ50BwAJ">CVE-2018-3760</a> (Sprockets path traversal vulnerability).
Brakeman will warn about use of the affected Sprockets version and <code class="language-plaintext highlighter-rouge">config.assets.compile = true</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1241">changes</a>)</p>

<h2 id="enable-optional-checks">Enable Optional Checks</h2>

<p>Brakeman has options to enable <em>all</em> checks, to disable <em>some</em> checks, and to enable a subset of checks, but not to enable <em>default</em>+<em>some optional</em> checks.</p>

<p>The <code class="language-plaintext highlighter-rouge">--enable</code> option has been added to allow enabling individual optional checks.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1263">changes</a>)</p>

<h2 id="docker-support">Docker Support</h2>

<p>Thanks to <a href="https://github.com/ryankemper">Ryan Kemper</a>, Brakeman now has a Dockerfile to enable local building and running of Brakeman inside Docker.</p>

<p>Additionally, there is now a <a href="https://hub.docker.com/r/presidentbeef/brakeman">Docker image available for Brakeman</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull presidentbeef/brakeman
docker run -v "$(pwd)":/code brakeman --color
</code></pre></div></div>

<p>See the Brakeman <a href="https://github.com/presidentbeef/brakeman#running-with-docker">README</a> for more details.</p>

<p>Please note the Docker image is built from the master Brakeman branch. The master branch is typically stable, but it will typically be ahead of the gem release.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1252">changes</a>)</p>

<h2 id="empty-secrets">Empty Secrets</h2>

<p>Thanks to <a href="https://github.com/naokikimura">Naoki Kimura</a>, Brakeman will no longer show an error when the <code class="language-plaintext highlighter-rouge">secrets.yml</code> file is empty.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1254">changes</a>)</p>

<h2 id="file-access-with-tempfiles">File Access with Tempfiles</h2>

<p>Thanks to <a href="https://github.com/cmkoller">Christina Koller</a>, Brakeman will no longer warn about file access issues when Tempfiles are used.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1244">changes</a>)</p>

<h2 id="shellescape-and-command-injection">Shellescape and Command Injection</h2>

<p>Thanks to <a href="https://github.com/oggy">George Ogata</a>, Brakeman will no longer warn about command injection when <code class="language-plaintext highlighter-rouge">shelljoin</code> or <code class="language-plaintext highlighter-rouge">shellescape</code> are used.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1242">changes</a>)</p>

<h2 id="rails-4-configuration">Rails 4 Configuration</h2>

<p>When implementing the check for CVE-2018-3760, it was discovered that Brakeman was not handling the Rails 4 configuration format properly:</p>

<p>Brakeman was not picking up any configuration options if this format was used:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;AppName&gt;.application.configure do
  #...
end
</code></pre></div></div>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1241/commits/515a2f9e185f2488e227f39ed930ef6cf2bcee3a">changes</a>)</p>

<h2 id="default-encoding">Default Encoding</h2>

<p>Brakeman now sets the default external encoding to <code class="language-plaintext highlighter-rouge">UTF-8</code> to avoid issues where the environment might set a different encoding.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1288">changes</a>)</p>

<h2 id="gem-versions">Gem Versions</h2>

<p>Brakeman can now read gem versions from <code class="language-plaintext highlighter-rouge">gemspec</code> files. This is common for Rails engines.</p>

<p>Additionally, Brakeman now understands versions which only specify major/minor versions (e.g. <code class="language-plaintext highlighter-rouge">~&gt;4.0</code>).</p>

<p>The order of precedence is <code class="language-plaintext highlighter-rouge">Gemfile.lock</code> &gt; <code class="language-plaintext highlighter-rouge">Gemfile</code> &gt; <code class="language-plaintext highlighter-rouge">*.gemspec</code>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1257/">changes</a>)</p>

<h2 id="no-referrer-in-html-reports">No Referrer in HTML Reports</h2>

<p>Brakeman has unfortunately been setting <code class="language-plaintext highlighter-rouge">rel="no-referrer"</code> instead of <code class="language-plaintext highlighter-rouge">rel="noreferrer"</code> in HTML reports.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1259/commits/d3e487bfd1d080971af56f7658bf2c8888e4cdb2">changes</a>)</p>

<h2 id="thread-safety-in-call-index">Thread-Safety in Call Index</h2>

<p>In rare cases (heavy CPU load?), accessing the CallIndex when running checks caused thread-unsafe behavior. This would have been reflected in a Ruby error about modifying the index during iteration, although checks don’t actual modify the CallIndex.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1271">changes</a>)</p>

<h2 id="erb-trim-mode">ERb Trim Mode</h2>

<p>Brakeman has been accidentally setting the “trim mode” to the template file path (oops!) which silently (!) worked in tests. This only affects Rails 2.x.</p>

<p>This has been corrected and Ruby will now warn about <a href="https://redmine.ruby-lang.org/issues/15294">incorrect trim modes</a>.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1278">changes</a>)</p>

<h2 id="array-joins">Array Joins</h2>

<p>This release fixes a <code class="language-plaintext highlighter-rouge">nil</code> error when attempting to concatenate arrays.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1251">changes</a>)</p>

<h2 id="rendered-template-information">Rendered Template Information</h2>

<p>Template “render paths” now include <em>which</em> template was rendered.</p>

<p>This is reflected in the JSON report:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      "render_path": [
        {
          "type": "controller",
          "class": "HomeController",
          "method": "test_to_json",
          "line": 148,
          "file": "app/controllers/home_controller.rb",
          "rendered": {
            "name": "home/test_to_json",
            "file": "app/views/home/test_to_json.html.erb"
          }
        }
      ]
</code></pre></div></div>

<p>In the future this information may be used to improve other report formats as well.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1280">changes</a></p>

<h2 id="reduced-gem-size">Reduced Gem Size</h2>

<p>The <code class="language-plaintext highlighter-rouge">brakeman</code> gem <a href="https://blog.presidentbeef.com/blog/2016/08/09/bundling-gem-dependencies-inside-ruby-gems/">bundles all its dependencies</a>, which makes the gem a bit big.</p>

<p>This change removes some of the unneeded files (such as tests) and reduces the file size by about a third.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1253">changes</a>)</p>

<h2 id="dead-code-and-typos">Dead Code and Typos</h2>

<p>A few bits of dead code and minor typos were found via <a href="https://www.synopsys.com/software-integrity/security-testing/static-analysis-sast.html">Coverity</a> and fixed.</p>

<h2 id="warning-message-overhaul">Warning Message Overhaul</h2>

<p>Brakeman warning messages were previously just strings.</p>

<p>In order to introduce some formatting flexibility, Brakeman warning messages are now constructed as arrays of <code class="language-plaintext highlighter-rouge">Message</code> objects.
These objects specify the type of the message string (e.g. “code” or “plain”). At report generation time, the messages can be converted to a particular format,
such as HTML, plaintext, etc.</p>

<p>Along with this change, quite a bit of cleanup was performed on report generation in general.</p>

<p>These changes make it easier to produce consistent messages as well as potentially supporting translation in the future.</p>

<p>You may notice warning message text and/or formatting has changed as a result of these changes.
Please report any issues.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1259">changes</a>)</p>

<h2 id="dependency-updates">Dependency Updates</h2>

<p>Thanks to <a href="https://github.com/Jakenberg">Jake Peterson</a>, the Slim dependency has been updated to 4.0.1 to support newer syntax.</p>

<p>Note that Slim 4.x not longer supports Ruby 1.9.3. You may need to use the <code class="language-plaintext highlighter-rouge">brakeman-lib</code> gem or update your Ruby version.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1285">changes</a>)</p>

<p>RubyParser has been updated to 3.12.0 which includes <a href="https://github.com/seattlerb/ruby_parser/blob/master/History.rdoc#3120--2018-12-04">some added syntax support and is faster!</a></p>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr">Here are some example Brakeman scan times with the RubyParser improvements. <a href="https://t.co/yTxPVTGELH">pic.twitter.com/yTxPVTGELH</a></p>&mdash; Justin Collins (@presidentbeef) <a href="https://twitter.com/presidentbeef/status/1068232020478717952?ref_src=twsrc%5Etfw">November 29, 2018</a></blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1286">changes</a>)</p>

<h2 id="new-license">New License</h2>

<p>Brakeman is now distributed under the <a href="https://github.com/presidentbeef/brakeman/blob/master/LICENSE.md">Brakeman Public Use License</a> which restricts commercial use of Brakeman.</p>

<p>It does not restrict use of Brakeman to scan <em>your own code</em> or your organization’s code, regardless of whether that code is proprietary, commercial, free, open source, etc.</p>

<p>Feel free to message <a href="https://twitter.com/presidentbeef">@presidentbeef</a> if you have questions.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/1301">changes</a>)</p>


			</div>

                        
                            <div class="checksums-section">
                                <h3>Checksums</h3>
                                <p>The SHA256 sums for this release are:</p>
                                
                                    <div class="checksum-line">
                                        <span class="hash">d3204cfe9d26782954ee8805fd748d11e8f950d2c1aee7c806c1856f273ee3b9</span> 
                                        <span class="filename">brakeman-4.4.0.gem</span>
                                    </div>
                                
                                    <div class="checksum-line">
                                        <span class="hash">88849f05b1c85756fee8974b8061383493714676187af3b94b6a7978a7e1e58d</span> 
                                        <span class="filename">brakeman-lib-4.4.0.gem</span>
                                    </div>
                                
                                    <div class="checksum-line">
                                        <span class="hash">0417c20b0b6dab00c5cf5e9341868dc5d8139bca463bf45fefa925cac286127e</span> 
                                        <span class="filename">brakeman-min-4.4.0.gem</span>
                                    </div>
                                
                            </div>
                        

                        <div class="reporting-section">
                            <h3>Reporting Issues</h3>
                            <p>Thank you to everyone who reported bugs and contributed to this release!</p>
                            <p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release. Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>
                            <p>Hang out <a href="https://github.com/presidentbeef/brakeman/discussions">on GitHub</a> for questions and discussion.</p>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </div>
</div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content"><div class="footer-section">
                        <h4>Project</h4><a href="/docs/">Documentation</a><a href="https://github.com/presidentbeef/brakeman/releases">Changelog</a></div><div class="footer-section">
                        <h4>Community</h4><a href="https://github.com/presidentbeef/brakeman">GitHub</a><a href="https://github.com/presidentbeef/brakeman/discussions">Discussions</a><a href="https://github.com/presidentbeef/brakeman/issues">Issues</a><a href="/contributing/">Contributing</a></div><div class="footer-section">
                        <h4>Resources</h4><a href="/docs/quickstart/">Getting Started</a><a href="https://guides.rubyonrails.org/security.html">Rails Security Guide</a></div></div>
        </div>
    </footer>

    <script src="/javascripts/main.js"></script>
</body>
</html>
