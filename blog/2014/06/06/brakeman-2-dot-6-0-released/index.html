
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman - Rails Security Scanner: Brakeman 2.6.0 Released</title>
  <meta name="author" content="Justin Collins">
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="http://brakemanscanner.org/blog/2014/06/06/brakeman-2-dot-6-0-released/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Brakeman - Rails Security Scanner" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12578396-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman - Rails Security Scanner</a></h1>
  
    <h2>Static analysis security scanner for Ruby on Rails</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/brakeman_pro">Support</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    <div class="articlelogo">&nbsp;</div>
    
      <h1 class="entry-title">Brakeman 2.6.0 Released</h1>
    
    
      <p class="meta">




<time datetime="2014-06-06 09:04:00 -0700" pubdate  updated >Jun 6<span>th</span>, 2014</time>


</p>
    
  </header>


<div class="entry-content"><p>This release introduces significant changes to how and when files are parsed, which may introduce changes in existing warnings and errors.</p>

<p><em>Changes since 2.5.0</em>:</p>

<ul>
<li>Improve default route detection in Rails 3/4 (<a href="https://github.com/jjarmoc">Jeff Jarmoc</a>)</li>
<li>Handle controllers and models split across files (<a href="https://github.com/ptoomey3">Patrick Toomey</a>)</li>
<li>Fix handling of <code>protected_attributes</code> gem in Rails 4 (<a href="https://github.com/phene">Geoffrey Hichborn</a>)</li>
<li>Add check for CVE-2014-0130</li>
<li>Add <code>find_by</code>/<code>find_by!</code> to SQLi check for Rails 4</li>
<li>Do not branch values for <code>+=</code></li>
<li>Parse most files upfront instead of on demand</li>
<li>Fix CheckRender with nested render calls (<a href="https://github.com/presidentbeef/brakeman/issues/484">#484</a>)</li>
<li>Fix detection of <code>:host</code> setting in redirects (<a href="https://github.com/presidentbeef/brakeman/issues/506">#506</a>)</li>
<li>Ignore more model methods in redirects</li>
<li>Update to use RubyParser 3.5.0 (<a href="https://github.com/ptoomey3">Patrick Toomey</a>)</li>
</ul>


<h3>Improved Default Route Detection</h3>

<p>In addition to Jeff Jarmoc&#8217;s <a href="http://matasano.com/research/AnatomyOfRailsVuln-CVE-2014-0130.pdf">awesome research</a> on CVE-2014-0130, he contributed much-needed improvements to detecting use of <code>:action</code> and <code>*action</code> in routes for Rails 3/4. This may result in more default routes warnings.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/493">changes</a>)</p>

<h3>Multiple Files for Controllers and Models</h3>

<p>(<a href="https://github.com/ptoomey3">Patrick Toomey</a>) contributed improvements which allow Brakeman to process controllers and models which may be defined in multiple files. The changes also improve how Brakeman handles controllers and models inside modules. This may alter some warnings and how some files are processed. Also, controllers and models may be associated with multiple files instead of just one.</p>

<p>(changes <a href="https://github.com/presidentbeef/brakeman/pull/492">here</a> and <a href="https://github.com/presidentbeef/brakeman/pull/482">here</a>)</p>

<h3>Protected Attributes Gem</h3>

<p>Thanks to (<a href="https://github.com/phene">Geoffrey Hichborn</a>), Brakeman will now treat Rails 4 apps which use the <a href="https://github.com/rails/protected_attributes">protected_attributes gem</a> like a Rails 3 app in regards to mass assignment.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/491">changes</a>)</p>

<h3>Check for CVE-2014-0130</h3>

<p>Besides warning about more types of default routes in this release, Brakeman will also warn about <a href="https://groups.google.com/d/msg/rubyonrails-security/NkKc7vTW70o/NxW_PDBSG3AJ">CVE-2014-0130</a> explicitly. If the application uses default routes, the warning will be high confidence, otherwise medium. Note Brakeman will categorize this issue as &#8220;Remote Code Execution&#8221;, since <a href="(http://matasano.com/research/AnatomyOfRailsVuln-CVE-2014-0130.pdf">Jeff Jarmoc demonstrated</a> rendering arbitrary files can lead to interpreting those files as ERB.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/502">changes</a>)</p>

<h3>SQL Injection in Find By</h3>

<p>Rails 4 added the <code>find_by</code>/<code>find_by!</code> methods which just call <code>where(*args).take</code> and are therefore vulnerable to the same issues as <code>where</code>. This release will check these methods for SQL injection now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/504">changes</a>)</p>

<h3>No Branching for +=</h3>

<p>Code which used <code>+=</code> heavily in combination with many branches lead to very poor performance. The resulting information from the branches was rarely useful. However, since <code>+=</code> is buidling up a value (as opposed to replacing it), simply ignoring branches does not lose any of the values involved. Thus, the same vulnerabilities should be able to be detected even when losing flow sensitivity for <code>+=</code> assignments. For details, <a href="https://github.com/presidentbeef/brakeman/pull/499">see the changes</a>.</p>

<p>This change has improved processing on some files from over 30 minutes to under 1 second. If some files were processing slowly or had to be ignored previously, consider trying again with this release.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/499">changes</a>)</p>

<h3>Parsing Files Upfront</h3>

<p>This release changes when files are parsed. Previously, files were read and parsed as they were processed. Now most files are read and parsed near the beginning of the scan instead. This has allowed for some internal cleanup and easier future changes. However, some bugs were fixed regarding sorting files which may cause warnings to change.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/501/">changes</a>)</p>

<h3>Nested Renders</h3>

<p><code>CheckRender</code> had a bug when processing a <code>render</code> call which contained another call to <code>render</code>. This has been fixed.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/485">changes</a>)</p>

<h3>Redirects with Chained Calls</h3>

<p>The last release added support for checking if a <code>redirect_to</code> argument was setting the <code>:host</code> option. However, it did not work with chained calls like the <a href="https://github.com/presidentbeef/brakeman/issues/506">one reported here</a>. Now it should.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/507">changes</a>)</p>

<h3>Redirects to Models</h3>

<p>More Rails 4 methods have been added and support for chained methods has been improved to prevent false positives when redirecting to a model instance.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/489">changes</a>)</p>

<h3>RubyParser Upgrade</h3>

<p>The RubyParser dependency has been upgraded to 3.5.0 for Ruby 2.1 support. There are some issues with newlines and line number accuracy in newer versions (it is better for some code and worse for others) which has prevented further upgrades at the moment.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/497">changes</a>)</p>

<h3>SHAs</h3>

<p>The SHA1 sums for this release are</p>

<pre><code>0aae141108d92040f3553557a31ad117ac1c2ea6  brakeman-2.6.0.gem
70c2353f31d4d04ba8d95c871062db31d5c6e981  brakeman-min-2.6.0.gem
</code></pre>

<h3>Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Collins</span></span>

      




<time datetime="2014-06-06 09:04:00 -0700" pubdate  updated >Jun 6<span>th</span>, 2014</time>



      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://brakemanscanner.org/blog/2014/06/06/brakeman-2-dot-6-0-released/" data-via="brakeman" data-counturl="http://brakemanscanner.org/blog/2014/06/06/brakeman-2-dot-6-0-released/" >Tweet</a>
  
  
  <g:plusone size="medium"></g:plusone>
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'brakeman';
  var disqus_identifier = 'http://brakemanscanner.org/blog/2014/06/06/brakeman-2-dot-6-0-released/';
  var disqus_url = 'http://brakemanscanner.org/blog/2014/06/06/brakeman-2-dot-6-0-released/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside role=sidebar>
  
    <section>
  <p></p>
  <p>Brakeman is an open source vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="https://brakemanpro.com">Brakeman Pro</a> is the commercial version of Brakeman which offers a GUI, test integration, deeper analysis, and more.</p>
</section>
<section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="http://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/11/01/brakeman-3-dot-4-1-released/">Brakeman 3.4.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/07/brakeman-3-dot-4-0-released/">Brakeman 3.4.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/12/brakeman-3-dot-3-4-released/">Brakeman 3.3.4/3.3.5 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/07/20/brakeman-3-dot-3-3-released/">Brakeman 3.3.3 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/10/brakeman-3-dot-3-2-released/">Brakeman 3.3.2 Released</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <a class="twitter-timeline" data-dnt=true href="https://twitter.com/brakeman" data-widget-id="258654953097273345">Tweets by @brakeman</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
