
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Brakeman: Brakeman 2.4.2 Released</title>
  <meta name="description" content="Brakeman is a static analysis security vulnerability scanner for Ruby on Rails applications."/>

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="keywords" content="brakeman,ruby on rails,security,scanner,vulnerabilities,static analysis"/>

  <link rel="canonical" href="https://brakemanscanner.org/blog/2014/03/20/brakeman-2-dot-4-2-released"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="feed.xml" rel="alternate" title="Brakeman" type="application/atom+xml"/>
  

  

  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.github_badge.js"></script>
<meta property="twitter:account_id" content="23978537" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@brakeman" />
<meta name="twitter:title" content="Brakeman - Brakeman 2.4.2 Released" />
<meta name="twitter:description" content="Brakeman Static Analysis Security Scanner for Ruby on Rails" />
<meta name="twitter:image" content="https://brakemanscanner.org/images/brakeman_logo_dark.png" />

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Brakeman</a></h1>
  
    <h2>Ruby on Rails Static Analysis Security Tool</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="feed.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:https://brakemanscanner.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/docs">Documentation</a></li>
  <li><a href="https://github.com/presidentbeef/brakeman">Source</a></li>
  <li><a href="/docs/contributing">Contributing</a></li>
  <li><a href="/brakeman_users">Users</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    <div class="articlelogo">&nbsp;</div>
    
      <h1 class="entry-title">Brakeman 2.4.2 Released</h1>
    
    
      <p class="meta">




<time datetime="2014-03-20 22:37:00 -0700" pubdate  updated >2014-03-20 22:37:00 -0700</time>


</p>
    
  </header>


<div class="entry-content"><p>This release is only internal changes and bug fixes, but some scans may see significant time and memory improvements.</p>

<p><em>Changes since 2.4.1</em>:</p>

<ul>
  <li>Skip identically rendered templates</li>
  <li>Improve HAML template processing</li>
  <li>Only track original template output locations</li>
  <li>Reuse duplicate call location information</li>
  <li>Fix duplicate warnings about sanitize CVE</li>
  <li>Remove <code class="highlighter-rouge">rescue Exception</code></li>
</ul>

<h3 id="drop-identical-templates">Drop Identical Templates</h3>

<p>For a long time now Brakeman has skipped processing templates if the template had already been processed with an identical environment. However, there are many times when a template is rendered with different environments but the actual output is the same. Brakeman now drops these templates (they are rendered, then discarded if they are duplicates). This reduces peak memory overhead, sometimes drastically. It can also speed up call indexing and vulnerability checks since fewer templates are searched.</p>

<p>The location and render path of template warnings may change slightly due to this change. Also, the rendered template debug output will no longer include all rendered templates since duplicates will not be tracked.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/442">changes</a>)</p>

<h3 id="better-haml-processing">Better HAML Processing</h3>

<p>HAML templates will be processed more accurately with this release.</p>

<p>For example, a template like this</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#content
  .nav
    = @navigation_menu
</code></pre></div></div>

<p>used to produce output like</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+-------------------------------------------------------------------------------------------------+
| Output                                                                                          |
+-------------------------------------------------------------------------------------------------+
| [Output] "&lt;div id='content'&gt;; &lt;div class='nav'&gt;; #{[Escaped] @navigation_menu}; &lt;/div&gt;;&lt;/div&gt;;" |
+-------------------------------------------------------------------------------------------------+
</code></pre></div></div>

<p>but now it will look like this instead</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+-----------------------------------+
| Output                            |
+-----------------------------------+
| [Escaped Output] @navigation_menu |
+-----------------------------------+
</code></pre></div></div>

<p>Besides looking much nicer, this improves warnings and reduces how much code Brakeman has to search. Additionally, these <code class="highlighter-rouge">push_text</code> methods can often interpolate multiple values into the output string, which were not being properly detected as output. This is fixed now.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/441">changes</a>)</p>

<h3 id="duplicate-template-outputs">Duplicate Template Outputs</h3>

<p>Aliased values in templates were being counted multiple times as output. This did not affect warnings generated, but it did create duplicate output values to check and extraneous debug output.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/443">changes</a>)</p>

<h3 id="call-location-reuse">Call Location Reuse</h3>

<p>For large applications, many calls in the call index actually have the same location (class+method or template). Instead of creating a new location hash for each call, the locations are cached and reused.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/444">changes</a>)</p>

<h3 id="sanitize-cve-duplicates">Sanitize CVE Duplicates</h3>

<p>Donâ€™t worry - <a href="https://groups.google.com/d/msg/rubyonrails-security/zAAU7vGTPvI/1vZDWXqBuXgJ">CVE-2013-1857</a> is one year old this week. But Brakeman was not properly preventing duplicate warnings for it. Hopefully this was affecting exactly no one.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/445">changes</a>)</p>

<h3 id="narrower-exception-handling">Narrower Exception Handling</h3>

<p>All instances of <code class="highlighter-rouge">rescue Exception</code> were removed from Brakeman and replaced with bare <code class="highlighter-rouge">rescue</code>s to catch <code class="highlighter-rouge">StandardError</code> and subclasses. <code class="highlighter-rouge">Exception</code> has some unfortunate subclasses, such as <code class="highlighter-rouge">NoMemoryError</code> and <code class="highlighter-rouge">Interrupt</code> which Brakeman should not be rescuing.</p>

<p>This does mean there may be some newly unhandled exceptions. Please report these so they can be rescued properly.</p>

<p>(<a href="https://github.com/presidentbeef/brakeman/pull/446">changes</a>)</p>

<h3 id="shas">SHAs</h3>

<p>The SHA1 sums for this release are</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>02842dc497bf22b5b427cfd02635c005c4fc4fd4  brakeman-2.4.2.gem
4893cedbcb015e96c82f4777b00a49ca8d0ae22f  brakeman-min-2.4.2.gem
</code></pre></div></div>

<h3 id="reporting-issues">Reporting Issues</h3>

<p>Please report any <a href="https://github.com/presidentbeef/brakeman/issues">issues</a> with this release! Take a look at <a href="https://github.com/presidentbeef/brakeman/wiki/How-to-Report-a-Brakeman-Issue">this guide</a> to reporting Brakeman problems.</p>

<p>Also consider following <a href="https://twitter.com/brakeman">@brakeman</a> on Twitter and joining the <a href="http://brakemanscanner.org/contact/">mailing list</a>.</p>
</div>


  <footer>
    <p class="meta">
      


      




<time datetime="2014-03-20 22:37:00 -0700" pubdate  updated >2014-03-20 22:37:00 -0700</time>



      


    </p>
    
      <div class="sharing">
  
  
</div>

    
  </footer>
</article>

</div>

<aside role=sidebar>
  <section>
  <p></p>
  <p>Brakeman is a free vulnerability scanner specifically designed for Ruby on Rails applications. It statically analyzes Rails application code to find security issues at any stage of development.</p>
  <p><a href="/docs/quickstart">Get started!</a></p>
</section>

  <section>
<script type='text/javascript'>
    $(document).ready(function(){
        $("#github").GitHubBadge({
          login: "presidentbeef",
          kind: "project",
          repo_name: "brakeman",
          include_github_logo: false,
          image_path: "",
          commit_count: "1",
          issue_count: "0",
          repo_count: "0"
      });
    });
</script>
<div id="github"></div>
<a href="https://travis-ci.org/#!/presidentbeef/brakeman"><img src="https://secure.travis-ci.org/presidentbeef/brakeman.png" /></a>
</section>

  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2022/11/17/brakeman-5-dot-4-dot-0-released">Brakeman 5.4.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/08/09/brakeman-5-dot-3-dot-0-released">Brakeman 5.3.0 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/01/brakeman-5-dot-2-dot-3-released">Brakeman 5.2.3 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/04/06/brakeman-5-dot-2-dot-2-released">Brakeman 5.2.2 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/01/30/5-dot-2-dot-1-released">Brakeman 5.2.1 Released</a>
      </li>
    
  </ul>
</section>

</aside>


    </div>
  </div>
  <footer><p>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | <a href="/content_license">Content license</a></span>
</p>

</footer>
</body>
</html>
