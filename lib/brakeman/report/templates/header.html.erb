<!DOCTYPE HTML SYSTEM>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Brakeman Report</title>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript">
    function toggle(context) {
      var elem = document.getElementById(context);

      if (elem.style.display != "block") {
        elem.style.display = "block";

        elem.querySelectorAll("table").forEach(function(table) {
          $(table).DataTable().columns.adjust();
        });
      } else {
        elem.style.display = "none";
      }

      elem.parentNode.scrollIntoView();
    }

    $(document).ready(function() {
      $('table').DataTable({
        searching: false,
        paging:    false,
        info:      false
      });
    });
  </script>
  <style>
    <%= css %>
  </style>
</head>
<body>

<h1>Brakeman Report</h1>
<table>
  <thead>
    <tr>
      <th>Application Path</th>
      <th>Rails Version</th>
      <th>Brakeman Version</th>
      <th>Report Time</th>
      <th>Checks Performed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= tracker.app_path %></td>
      <td><%= rails_version %></td>
      <td><%= brakeman_version %>
      <td>
        <%= tracker.start_time %><br><br>
        <%= tracker.duration %> seconds
      </td>
      <td><%= checks.checks_run.sort.join(", ") %></td>
    </tr>
  </tbody>
</table>
<br>
